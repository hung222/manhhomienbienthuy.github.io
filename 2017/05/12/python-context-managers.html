<!DOCTYPE html><html lang=vi class="html-padding antialiased"><head><meta charset=utf-8><title>Python context managers | Blog | manhhomienbienthuy</title><meta name=viewport content="width=device-width, initial-scale=1"><link rel=apple-touch-icon href=/icon-touch.png><link rel=icon sizes=192x192 href=/icon-touch.png><link rel="shortcut icon" href=/favicon.ico><link rel=canonical href=https://manhhomienbienthuy.github.io/2017/05/12/python-context-managers.html><meta name=msapplication-TileImage content=/icon-tile.png><meta name=twitter:dnt content=on><meta name=Author content=manhhomienbienthuy><meta name=rating content=general><meta name=twitter:card content=product><meta name=twitter:site content=@_naa_4f><meta name=twitter:creator content=@_naa_4f><link type=application/rss+xml rel=alternate title="Blog | manhhomienbienthuy Full RSS Feed" href=https://manhhomienbienthuy.github.io/feeds/rss.xml><meta name=description content="Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi… Trong Python, context manager là một phương thức cho phép bạn cấp phát và sử dụng tài nguyên một cách hiệu quả. Context manager được sử dụng rộng rãi thông qua câu lệnh with. Ví dụ: with open('foo', 'w') as f: f.write('Hora! We opened this file') Đoạn […]"><meta name=keywords content="Python, context manager, fundamental, programming, blog, naa, manhhomienbienthuy, personal blog"><meta name=twitter:title content="Python context managers | Blog | manhhomienbienthuy"><meta name=twitter:description content="Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi… Trong Python, context manager là một phương thức cho phép bạn cấp phát và sử dụng tài nguyên một cách hiệu quả. Context manager được sử dụng rộng rãi thông qua câu lệnh with. Ví dụ: with open('foo', 'w') as f: f.write('Hora! We opened this file') Đoạn […]"><meta name=twitter:image content=/https://i.imgur.com/nI0FtXN.png><link rel=stylesheet href=/theme/css/app.min.css><script>try{"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}catch{}</script></head><body class="text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"><header class=mb-8><div class="fixed z-50 top-0 left-0 right-0 text-white bg-gray-900"><div class="relative flex flex-wrap justify-between items-center gap-x-4 max-w-screen-xl mx-auto px-4"><a href=/ class="my-2.5 rounded-full"><img width=20 height=20 class="h-5 w-5 rounded-full" src=/meow.webp alt=manhhomienbienthuy></a><div class="flex-grow flex items-center gap-x-0.5 md:hidden text-xs"><svg xmlns=http://www.w3.org/2000/svg class="jsMenuToggle h-5 w-5 cursor-pointer" fill=none viewbox="0 0 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16"/></svg><span class="jsMenuToggle uppercase cursor-pointer">Menu</span></div><nav class="jsMenus hidden md:block flex-grow order-last md:order-none w-full md:w-auto text-xs uppercase bg-gray-900 divide-y md:divide-y-0"><a href=/ class="block md:inline p-4"> Trang chủ </a><a class="block md:inline p-4" href=/category/cuoc-song.html> Cuộc sống </a><a class="block md:inline p-4" href=/category/du-lich.html> Du lịch </a><a class="block md:inline p-4" href=/category/lap-trinh.html> Lập trình </a><a class="block md:inline p-4" href=/category/tong-hop.html> Tổng hợp </a></nav><div class="flex justify-between gap-x-3 items-center"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=/feeds/rss.xml target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>RSS Feed</title><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"/></svg></a><div class="flex items-center pl-2 border-l border-gray-800 text-gray-400 dark:text-gray-500"><button type=button id=jsThemeToggle><span class=dark:hidden><svg viewbox="0 0 24 24" fill=none stroke-width=2 stroke-linecap=round stroke-linejoin=round stroke=currentColor class="w-5 h-5"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg></span><span class="hidden dark:inline"><svg viewbox="0 0 24 24" fill=currentColor class="w-5 h-5"><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path fill-rule=evenodd clip-rule=evenodd d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z"/></svg></span></button></div></div></div><ul class="jsThemeMenus hidden absolute z-50 top-full right-2 w-36 mt-2 py-1 text-sm font-semibold bg-gray-100 dark:bg-gray-900 text-gray-400 dark:text-gray-500 rounded-lg shadow-lg overflow-hidden"><li class="py-1 px-2 flex items-center cursor-pointer" id=jsThemeLight><svg viewbox="0 0 24 24" fill=none stroke-width=2 stroke-linecap=round stroke-linejoin=round stroke=currentColor class="w-6 h-6 mr-2"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg> Light </li><li class="py-1 px-2 flex items-center cursor-pointer" id=jsThemeDark><svg viewbox="0 0 24 24" fill=currentColor class="w-6 h-6 mr-2"><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path fill-rule=evenodd clip-rule=evenodd d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z"/></svg> Dark </li><li class="py-1 px-2 flex items-center cursor-pointer text-sky-500" id=jsThemeSystem><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6 mr-2 text-gray-400 dark:text-gray-500" fill=none viewbox="0 0 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap=round stroke-linejoin=round d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg> System </li></ul></div><div class="pt-10 md:pt-12 bg-white shadow dark:bg-gray-800 dark:text-gray-100"><div class="max-w-screen-xl mx-auto px-6 py-4"><a href=/ title="Blog | manhhomienbienthuy"><svg width=1000 height=165 version=1.0 viewbox="0 0 1000 165" fill=currentColor class="max-w-full max-h-24 w-auto h-auto mx-auto text-gray-900 dark:text-gray-100" xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg></a></div></div></header><main><div class="grid grid-cols-1 md:grid-cols-7 items-start gap-6 max-w-screen-xl mx-auto px-6"><div class=md:col-span-5><div class="bg-white p-8 shadow-lg dark:bg-gray-800"><h1 class="mb-4 text-3xl leading-relaxed font-bold text-gray-900 uppercase dark:text-gray-100"> Python context managers </h1><img width=360 height=270 class="w-full h-auto mb-4" src=https://i.imgur.com/nI0FtXN.png alt="Python context managers"><div class="flex flex-wrap gap-x-4 mb-10 py-2 text-sm leading-relaxed text-gray-400 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100"><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg><a href=/category/lap-trinh.html> Lập trình </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><a href=/2017> 2017-05-12 </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><a href=/pages/gioi-thieu.html> manhhomienbienthuy </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg> 2021-07-28 13:47:48 (JST) </div></div><div class="md:text-lg leading-loose md:leading-loose text-justify"><p class=my-4>Trong Python, context manager là một phương thức cho phép bạn cấp phát và sử dụng tài nguyên một cách hiệu quả. Context manager được sử dụng rộng rãi thông qua câu lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code>. Ví dụ:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
    <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'Hora! We opened this file'</span><span class=p>)</span>
</code></pre></div><p class=my-4>Đoạn code trên mở một file, ghi dữ liệu và đóng file lại. Nếu có bất kỳ lỗi gì xảy ra, thì file cũng luôn luôn được đảm bảo là đã đóng. Đoạn code trên nếu viết mà không sử dụng context manager thì sẽ trông như dưới đây:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span>
<span class=k>try</span><span class=p>:</span>
    <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'Hora! We opened this file'</span><span class=p>)</span>
<span class=k>finally</span><span class=p>:</span>
    <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div><p class=my-4>So sánh hai cách viết này thì chúng ta đã thấy rất rõ ràng rằng, context manager cho chúng ta cách viết code ngắn gọn hơn hẳn. Lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code> cho chúng ta bảo đảm rằng file luôn luôn được đóng mà không cần biết những logic xử lý bên trong.</p><p class=my-4>Hẳn là các bạn đã rất quen thuộc với những đoạn code trên, đặc biệt khi bạn đã từng nghe nói đến "<a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://jeffknupp.com/writing-idiomatic-python-ebook/ rel="noopener noreferrer" target=_blank>Idiomatic Python</a>". Nhưng liệu bạn đã chắc chắn hiểu được cách làm việc chính xác với file và lý do tại sao đó lại là cách đúng không? Hoặc đơn giản hơn, bạn có biết khi nào thì mình đã thao tác sai không.</p><p class=my-4>Nếu câu trả lời là <strong>không</strong>, thì bài viết này chính là dành cho bạn.</p><p class=my-4>Context manager thường được sử dụng để lock các tài nguyên (trường hợp mở và đóng file là một ví dụ kinh điển cho việc này).</p><div class="p-2 text-xs leading-relaxed bg-gray-100 whitespace-nowrap overflow-auto dark:bg-gray-900"><span class="font-semibold text-sm text-gray-900 mb-4 dark:text-gray-100">Mục lục</span><ul><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#quan-ly-tai-nguyen>Quản lý tài nguyên</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#quan-ly-tai-nguyen-hieu-qua-hon>Quản lý tài nguyên hiệu quả hơn</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#mot-so-context-manager-huu-ich-khac>Một số context manager hữu ích khác</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#cai-at-context-manager-nhu-mot-class>Cài đặt context manager như một class</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#xu-ly-exception>Xử lý exception</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#su-dung-contextlib-cai-at-context-manager>Sử dụng contextlib cài đặt context manager</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#ket-luan>Kết luận</a></li></ul></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=quan-ly-tai-nguyen><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#quan-ly-tai-nguyen title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Quản lý tài nguyên</h2><p class=my-4>Tính năng quan trọng nhất và cũng là phổ biến nhất của context manager là để <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/Resource_management_(computing) rel="noopener noreferrer" target=_blank>quản lý tài nguyên</a> một cách chính xác. Quay lại với việc đọc và ghi file ở ví dụ trên, tại sao chúng ta phải sử dụng context manager. Mỗi khi mở một file để đọc hoặc ghi, một tài nguyên của hệ thống, trong trường hợp này là <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/File_descriptor rel="noopener noreferrer" target=_blank>file descriptor</a> sẽ đã bị tiêu tốn để chúng ta có thể thao tác. Thật không may là tài nguyên này lại là hữu hạn. Mỗi hệ điều hành đều có giới hạn nhất định cho số lượng file có thể mở cùng một lúc.</p><p class=my-4>Không tin ư, bạn hãy xem ví dụ sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=o>&gt;&gt;&gt;</span> <span class=n>files</span> <span class=o>=</span> <span class=p>[]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10000</span><span class=p>):</span>
<span class=o>...</span>     <span class=n>files</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>open</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>))</span>
<span class=o>...</span>
<span class=n>Traceback</span> <span class=p>(</span><span class=n>most</span> <span class=n>recent</span> <span class=n>call</span> <span class=n>last</span><span class=p>):</span>
  <span class=n>File</span> <span class=s2>"&lt;stdin&gt;"</span><span class=p>,</span> <span class=n>line</span> <span class=mi>2</span><span class=p>,</span> <span class=ow>in</span> <span class=o>&lt;</span><span class=n>module</span><span class=o>&gt;</span>
<span class=ne>OSError</span><span class=p>:</span> <span class=p>[</span><span class=n>Errno</span> <span class=mi>24</span><span class=p>]</span> <span class=n>Too</span> <span class=n>many</span> <span class=nb>open</span> <span class=n>files</span><span class=p>:</span> <span class=s1>'foo'</span>
</code></pre></div><p class=my-4>Ngoài lề một chút, file descriptor thực chất là một số nguyên. Khi bạn mở một file, hệ điều hành sẽ tạo ra một entry (có thể ở kernel) lưu trữ những thông tin liên quan đến file được mở. Mỗi entry sẽ được gán với 1 số nguyên (và số này sẽ là duy nhất), cho phép người dùng thông qua đó để thao tác với file.</p><p class=my-4>Thực chất người dùng đang thao tác một cách gián tiếp thông qua file descriptor (và thông qua entry của kernel) với các dữ liệu thật sự được ghi ở bộ nhớ ngoài. Việc này mang lại nhiều lợi ích như có thể chia sẻ file cho nhiều tiến trình khác nhau cũng như duy trì bảo mật cho các file đó.</p><p class=my-4>Thực ra, hằng ngày bạn đều đang làm việc với file descriptor mà có thể bạn cũng không nhận ra. Hệ điều hành đã gán sẵn một số file descriptor như <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">0</code> cho <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=http://www.linfo.org/standard_input.html rel="noopener noreferrer" target=_blank>bàn phím</a>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">1</code> cho <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=http://www.linfo.org/standard_output.html rel="noopener noreferrer" target=_blank>màn hình</a>, v.v... Và mọi thao tác chúng ta làm với máy tính đều thông qua các file descriptor này. Bạn nghĩ sao về việc <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=http://linuxcommand.org/lts0060.php rel="noopener noreferrer" target=_blank>chuyển hướng</a> của câu lệnh Linux như thế này:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>$ </span>sort &lt; file_list &gt; sorted_file_list <span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span>
</code></pre></div><p class=my-4>Tương tự như vậy, khi bạn mở một socket, một socket descriptor cũng sẽ được sử dụng.</p><p class=my-4>Quay trở lại với nội dung của bài viết. Vậy điều gì xảy khi code Python của bạn mở file mà không đóng nó lại. Rất hiển nhiên, chúng ta đã mất một file descriptor mà chúng ta sẽ không bao giờ cần đến nó nữa. Điều này đồng nghĩa với việc, số file chúng ta có thể thao tác sẽ ít dần đi, do số lượng của chúng bị giới hạn. Mà việc "quên" không đóng file nhiều khi xảy ra khá thường xuyên, và tích tiểu thành đại, đến một lúc nào đó bạn không thể mở thêm file nào nữa.</p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Bạn có thể dùng lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">ulimit -n</code> để kiểm tra xem hệ thống của mình cho phép mở tối đa bao nhiêu file cùng lúc.</p></blockquote><p class=my-4>Tất nhiên là mọi vấn đề đều có thể giải quyết được. Vẫn với ví dụ trên, chúng ta có thể xử lý bằng cách đóng từng file một như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=o>&gt;&gt;&gt;</span> <span class=n>files</span> <span class=o>=</span> <span class=p>[]</span>
<span class=o>&gt;&gt;&gt;</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10000</span><span class=p>):</span>
<span class=o>...</span>     <span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span>
<span class=o>...</span>     <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<span class=o>...</span>     <span class=n>files</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=o>...</span>
<span class=o>&gt;&gt;&gt;</span>
</code></pre></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=quan-ly-tai-nguyen-hieu-qua-hon><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#quan-ly-tai-nguyen-hieu-qua-hon title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Quản lý tài nguyên hiệu quả hơn</h2><p class=my-4>Trên đây là một cách giải quyết tuy vẫn hoạt động tốt nhưng không được thông minh cho lắm. Trong những hệ thống phức tạp hơn, rất khó để đảm bảo rằng tất cả các file đã được đóng lại khi không dùng đến nữa.</p><p class=my-4>Giả sử trong quá trình thao tác, chúng ta gặp phải một <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/tutorial/errors.html rel="noopener noreferrer" target=_blank>exception</a> nào đó thì phải làm thế nào đây. Bắt exception và xử lý riêng sao? Phải bắt những exception nào mới thì gọi là đủ?</p><p class=my-4>Hoặc kể cả không có exception nhưng hàm đã <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">return</code> trước khi file kịp close thì sao? Trong những trường hợp phức tạp như vậy, làm thế nào để chúng ta "nhớ" phải đóng file lại. Câu trả lời là khó tới gần như không thể (thật phũ phàng).</p><p class=my-4>Trong nhiều ngôn ngữ, lập trình viên cần phải sử dụng cấu trúc kiểu như <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">try ... except ... finally ...</code> để đảm bảo rằng file sẽ được đóng. Rất may mắn, Python đã nghĩ đến những khó khăn này của chúng ta và đưa cho chúng ta một phương thức dễ dàng để làm những việc đó - context manager.</p><p class=my-4>Nói một cách ngắn gọn, chúng ta cần một phương thức càng đơn giản càng tốt để đảm bảo các tài nguyên được dọn dẹp cẩn thận dù có xảy ra bất cứ chuyện gì đi chăng nữa. Và context manager sẽ cung cấp cho chúng ta tính năng này:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=k>with</span> <span class=n>something_that_returns_a_context_manager</span><span class=p>()</span> <span class=k>as</span> <span class=n>my_resource</span><span class=p>:</span>
    <span class=n>do_something</span><span class=p>(</span><span class=n>my_resource</span><span class=p>)</span>
    <span class=o>...</span>
    <span class=nb>print</span><span class=p>(</span><span class=s1>'done using my_resource'</span><span class=p>)</span>
</code></pre></div><p class=my-4>Đơn giản vậy đó. Bằng cách sử dụng <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://www.python.org/dev/peps/pep-0343/ rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code></a>, chúng ta sẽ đưa mọi thứ vào trong một context manager. Chúng ta gán context manager này cho một biến, và biến đó chỉ tồn tại khi block sau đó được thực thi. Điều này giống như chúng ta tạo một hàm, nó sẽ gọi một số thao tác và khi kết thúc, nó sẽ tự dọn dẹp những gì nó tạo ra.</p><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=mot-so-context-manager-huu-ich-khac><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#mot-so-context-manager-huu-ich-khac title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Một số context manager hữu ích khác</h2><p class=my-4>Context manager thực sự rất cần thiết trong Python, và nó đã có mặt trong thư việc chuẩn. Một số context manager có thể bạn đã từng làm việc là <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/zipfile.html#zipfile-objects rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">zipfile.ZipFiles</code></a>, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/subprocess.html#subprocess.Popen rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">subprocess.Popen</code></a>, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/tarfile.html#tarfile.TarFile rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">tarfile.TarFile</code></a>, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/telnetlib.html#telnetlib.Telnet rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">telnetlib.Telnet</code></a>, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/pathlib.html rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">pathlib.Path</code></a>, v.v... Thậm chí, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/threading.html#lock-objects rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Lock</code></a> của <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/threading.html rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">threading</code></a> cũng là context manager. Trên thực tế, tất cả những tài nguyên mà chúng ta cần <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">close</code> sau khi sử dụng đều (và rất nên) là context manager.</p><p class=my-4>Việc sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Lock</code> tương đối đặc biệt một chút. Trong trường hợp này, tài nguyên là một <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/Mutual_exclusion rel="noopener noreferrer" target=_blank>mutex</a>. Sử dụng context manager sẽ phòng tránh được <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=http://wiki.c2.com/?DeadLock rel="noopener noreferrer" target=_blank>deadlock</a> trong lập trình <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/Multithreading_(computer_architecture) rel="noopener noreferrer" target=_blank>multithread</a> nếu chúng ta sử dụng khóa mà không bao giờ mở nó. Hãy xem xét ví dụ sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Lock</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lock</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>do_something_dangerous</span><span class=p>():</span>
<span class=gp>... </span>    <span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
<span class=gp>... </span>    <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s1>'OOPS! I forgot this code could raise exceptions'</span><span class=p>)</span>
<span class=gp>... </span>    <span class=n>lock</span><span class=o>.</span><span class=n>release</span><span class=p>()</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>do_something_dangerous</span><span class=p>()</span>
<span class=gp>... </span><span class=k>except</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s1>'Got an exception'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>Got an exception</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
</code></pre></div><p class=my-4>Với code trên, rõ ràng là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">lock.release()</code> sẽ không bao giờ được gọi, và do đó, mọi tiến trình sẽ gặp deadlock và chết cứng ở đó (<code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">lock.acquire()</code> sẽ không bao giờ kết thúc). Rất may mắn, với context manager, điều này có thể sửa chữa được:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>threading</span> <span class=kn>import</span> <span class=n>Lock</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lock</span> <span class=o>=</span> <span class=n>Lock</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>do_something_dangerous</span><span class=p>():</span>
<span class=gp>... </span>    <span class=k>with</span> <span class=n>lock</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=s1>'oops I forgot this code could raise exceptions'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>try</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>do_something_dangerous</span><span class=p>()</span>
<span class=gp>... </span><span class=k>except</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s1>'Got an exception'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>Got an exception</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>lock</span><span class=o>.</span><span class=n>acquire</span><span class=p>()</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=s1>'We can get here'</span><span class=p>)</span>
<span class=go>We can get here</span>
<span class=go>&gt;&gt;&gt;</span>
</code></pre></div><p class=my-4>Trên thực tế, không có cách nào để gây ra deadlock nếu sử dụng context manager. Và đây là điều chúng ta đang cần.</p><p class=my-4>Trong phần tiếp theo, chúng ta sẽ tìm hiểu cách cài đặt một context manager, và qua đó, chúng ta sẽ hiểu hơn về cách thức một context manager hoạt động.</p><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=cai-at-context-manager-nhu-mot-class><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#cai-at-context-manager-nhu-mot-class title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Cài đặt context manager như một class</h2><p class=my-4>Có nhiều cách khác nhau để cài đặt một context manager. Cách đơn giản nhất là cài đặt một class với hai phương thức vô cùng đặc biệt: <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>. Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> sẽ trả về tài nguyên cần quản lý (ví dụ như file đang được mở) và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> sẽ làm việc dọn dẹp hệ thống.</p><p class=my-4>Hãy xem xét ví dụ sau về một context manager khi làm việc với file:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>File</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>,</span> <span class=n>method</span><span class=p>):</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>file_name</span><span class=p>,</span> <span class=n>method</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__enter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__exit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>type</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>traceback</span><span class=p>):</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<span class=gp>...</span>
<span class=go>&gt;&gt;&gt;</span>
</code></pre></div><p class=my-4>Class trên cũng như nhiều class khác, phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> để để khởi tạo đối tượng, trong trường hợp này là khởi tạo tên file cần mở cùng với mode (đọc/ghi) của nó. Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> mở file và trả về đối tượng file để thao tác với file đó trong khi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> chỉ đơn giản là đóng file lại.</p><p class=my-4>Với hai phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>, chúng ta có thể sử dụng class này cùng với <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code>:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>with</span> <span class=n>File</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'Hora! We opened this file'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>25</span>
</code></pre></div><p class=my-4>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> bắt buộc phải có 3 tham số. Dưới đây là những gì thực sự xảy ra khi chúng ta gọi context manager:</p><ul class="list-disc ml-5"><li>Câu lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code> lưu phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> của class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">File</code></li><li>Câu lệnh này gọi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> của class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">File</code></li><li>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code> mở file và trả về object để thao tác với file đó</li><li>Object được trả về được truyền cho biến <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">f</code></li><li>Chúng ta thao tác với file bằng cách ghi dữ liệu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">f.write</code></li><li>Khi kết thúc block, câu lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code> gọi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code></li><li>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> đóng file cho chúng ta</li></ul><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=xu-ly-exception><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#xu-ly-exception title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Xử lý exception</h2><p class=my-4>Trong cài đặt đơn giản trên, chúng ta đã bỏ qua 3 tham số <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">value</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">traceback</code> của phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>. Tuy nhiên, trong quá trình thực thi block lệnh ở trên, nếu xảy ra một exception, Python sẽ chuyển những thông tin <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">value</code> và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">traceback</code> của exception này tới phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>. Điều đó giúp chúng ta có thể tùy biến phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> để xử lý những vấn đề có thể xảy ra trong quá trình thực thi. Trong trường hợp của chúng ta, chúng ta chỉ cần đóng file và không cần quan tâm đến exception này.</p><p class=my-4>Nhưng chuyện gì sẽ xảy ra nếu bản thân file object gặp phải một exception? Ví dụ, khi chúng ta thử gọi một phương thức không tồn tại:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>with</span> <span class=n>File</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>f</span><span class=o>.</span><span class=n>undefined_function</span><span class=p>(</span><span class=s1>'Oops! I called an unknown method'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>"&lt;stdin&gt;"</span>, line <span class=m>2</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>AttributeError</span>: <span class=n>'_io.TextIOWrapper' object has no attribute 'undefined_function'</span>
</code></pre></div><p class=my-4>Dưới đây là quy trình những gì đã xảy ra khi có lỗi xảy ra:</p><ul class="list-disc ml-5"><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">value</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">traceback</code> của lỗi đó được truyền cho <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code></li><li>Trong phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>, chúng ta có thể tùy ý xử lý exception đó</li><li>Nếu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> trả về <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">True</code> thì exception đã được xử lý hoàn toàn.</li><li>Nếu không, exception sẽ tiếp tục được raise bởi lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code></li></ul><p class=my-4>Trong trường hợp của chúng ta, phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> không trả về bất cứ thứ gì, do đó, lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code> sẽ raise exception.</p><p class=my-4>Chúng ta có thể tạm xử lý exception như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>File</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>file_name</span><span class=p>,</span> <span class=n>method</span><span class=p>):</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>file_name</span><span class=p>,</span> <span class=n>method</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__enter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__exit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>type</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>traceback</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s2>"Exception has been handled"</span><span class=p>)</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>file_obj</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=kc>True</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>with</span> <span class=n>File</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<span class=gp>... </span>    <span class=n>f</span><span class=o>.</span><span class=n>undefined_function</span><span class=p>()</span>
<span class=gp>...</span>
<span class=go>Exception has been handled</span>
<span class=go>&gt;&gt;&gt;</span>
</code></pre></div><p class=my-4>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code> trả về <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">True</code>, do đó, không có exception nào được raise bởi lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code>.</p><p class=my-4>Có nhiều cách để cài đặt context manager. Trên đây là một cách đơn giản và dễ hiểu nhất. Trong phần tiếp theo, chúng ta sẽ tìm hiểu thêm một số phương pháp cài đặt nữa.</p><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=su-dung-contextlib-cai-at-context-manager><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#su-dung-contextlib-cai-at-context-manager title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextlib</code> cài đặt context manager</h2><p class=my-4>Context manager quả là tiện lợi và hữu ích vô cùng. Do đó, trong thư viện chuẩn của Python có hẳn module <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/contextlib.html rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextlib</code></a> với rất nhiều công cụ để tạo và làm việc với context manager.</p><p class=my-4>Chúng ta có thể cài đặt context manager bằng cách sử dụng <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://manhhomienbienthuy.github.io/2015/12/22/tim-hieu-python-decorators.html rel="noopener noreferrer" target=_blank>decorator</a> và <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://manhhomienbienthuy.github.io/2016/01/05/python-iterator-generator.html rel="noopener noreferrer" target=_blank>generator</a>. <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextlib</code> cung cấp cho chúng ta decorator <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">@contextmanager</code> để decorate các hàm generator chỉ gọi <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://www.python.org/dev/peps/pep-0255/ rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">yield</code></a> đúng một lần duy nhất. Với decorator này, tất cả những gì diễn ra trước <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">yield</code> đều được coi là thao tác của phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__enter__</code>. Những gì dễn ra sau đó được coi là của phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__exit__</code>.</p><p class=my-4>Hãy xem xét ví dụ của chúng ta về quản lý file khi dùng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextlib</code>:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>contextmanager</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@contextmanager</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>open_file</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>mode</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>mode</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>yield</span> <span class=n>f</span>
<span class=gp>... </span>    <span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>files</span> <span class=o>=</span> <span class=p>[]</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>10000</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>with</span> <span class=n>open_file</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>,</span> <span class=s1>'w'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<span class=gp>... </span>        <span class=n>files</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>for</span> <span class=n>f</span> <span class=ow>in</span> <span class=n>files</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=ow>not</span> <span class=n>f</span><span class=o>.</span><span class=n>closed</span><span class=p>:</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'not closed'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>&gt;&gt;&gt;</span>
</code></pre></div><p class=my-4>Như chúng ta đã thấy, việc cài đặt context manager đã ngắn gọn hơn rất nhiều. Chúng ta chỉ cần mở file, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">yield</code> đối tượng đó và đóng nó lại. Mọi việc còn lại sẽ do decorator <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">@contextmanager</code> đảm nhiệm.</p><p class=my-4>Và ví dụ thực tế cho thấy rằng các file của chúng ta đã được quản lý tốt, tất cả chúng đã được đóng lại đầy đủ. Tuy nhiên, cách thức cài đặt tiện lợi này yêu cầu chúng ta phải có chút hiểu biết về decorator, generator cũng như lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">yield</code>. Có thể tóm tắt quá trình tạo context manager trên như sau:</p><ul class="list-disc ml-5"><li>Python tìm thấy <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">yield</code>, hàm này là một generator chứ không phải hàm thông thường.</li><li>Với decorator <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">@contextmanager</code>, hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">open_file</code> sẽ được truyền là tham số cho hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextmanager</code>.</li><li>Hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextmanager</code> trả về generator được bọc trong object của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">GeneratorContextManager</code>.</li><li>Object <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">GeneratorContextManager</code> được gán cho hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">open_file</code>. Do đó, khi chúng ta gọi hàm này, thực ra chúng ta đang làm việc với object <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">GeneratorContextManager</code>.</li></ul><p class=my-4>Python docs còn <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/library/contextlib.html#contextlib.contextmanager rel="noopener noreferrer" target=_blank>một ví dụ khác</a> thú vị hơn:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>contextmanager</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@contextmanager</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>tag</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s2>"&lt;</span><span class=si>%s</span><span class=s2>&gt;"</span> <span class=o>%</span> <span class=n>name</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>yield</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s2>"&lt;/</span><span class=si>%s</span><span class=s2>&gt;"</span> <span class=o>%</span> <span class=n>name</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>with</span> <span class=n>tag</span><span class=p>(</span><span class=s1>'h1'</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>&lt;h1&gt;</span>
<span class=go>foo</span>
<span class=go>&lt;/h1&gt;</span>
</code></pre></div><p class=my-4>Trong tất cả các trường hợp trên, chúng ta cũng không hề xử lý exception, vì vậy, context manager của chúng ta sẽ hoạt động giống như code đầu tiên.</p><p class=my-4>Một công cụ tiện lợi khác của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">contextlib</code> là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">ContextDecorator</code>. Nó cho phép chúng ta cài đặt các context manager theo kiểu class. Nhưng với việc kế thừa từ class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">ContextDecorator</code>, bạn có thể sử dụng context manager với lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">with</code> thông thường, hoặc sử dụng nó như một decorator dùng để decorate các hàm khác. Chúng ta có thể xem xét ví dụ sau (tương tự như ví dụ tag HTML ở trên):</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=kn>from</span> <span class=nn>contextlib</span> <span class=kn>import</span> <span class=n>ContextDecorator</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>tag</span><span class=p>(</span><span class=n>ContextDecorator</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>name</span> <span class=o>=</span> <span class=n>name</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__enter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'&lt;</span><span class=si>%s</span><span class=s1>&gt;'</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=bp>self</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__exit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>exc</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'&lt;/</span><span class=si>%s</span><span class=s1>&gt;'</span> <span class=o>%</span> <span class=bp>self</span><span class=o>.</span><span class=n>name</span><span class=p>)</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=kc>False</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>with</span> <span class=n>tag</span><span class=p>(</span><span class=s1>'h1'</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s1>'this is not html'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=go>&lt;h1&gt;</span>
<span class=go>this is not html</span>
<span class=go>&lt;/h1&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nd>@tag</span><span class=p>(</span><span class=s1>'h1'</span><span class=p>)</span>
<span class=gp>... </span><span class=k>def</span> <span class=nf>content</span><span class=p>():</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s1>'this is another non-html content'</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>content</span><span class=p>()</span>
<span class=go>&lt;h1&gt;</span>
<span class=go>this is another non-html content</span>
<span class=go>&lt;/h1&gt;</span>
<span class=go>&gt;&gt;&gt;</span>
</code></pre></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=ket-luan><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#ket-luan title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Kết luận</h2><p class=my-4>Bài viết trình bày những hiểu biết của tôi về context manager của Python, cách nó hoạt động và hỗ trợ cho chúng ta trong công việc lập trình. Như các bạn đã thấy, chúng ta có thể làm rất nhiều thứ với context manager. Mục đích cao nhất của nó thì không bao giờ thay đổi: quản lý hiệu quả các tài nguyên.</p><p class=my-4>Chúng ta không chỉ có thể dùng context manager mà còn có thể tự cài đặt context manager cho riêng mình. Hãy sử dụng context manager và làm cho cuộc sống dễ chịu hơn.</p></div><div class="mt-8 text-sm leading-relaxed"><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4 inline" fill=none viewbox="0 0 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/></svg><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #Python </span><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #context manager </span><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #fundamental </span><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #programming </span></div></div><div class="flex justify-between items-center my-10 text-sm"><div class="flex-grow text-left"><a href=/2017/06/12/web-developer-security-checklist.html class="p-2 text-white bg-crimson"><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg> Bài viết sau </a></div><div class="flex-grow text-right"><a href=/2017/05/02/algorithm-dinh-ly-sprague-grundy.html class="p-2 text-white bg-crimson"> Bài viết trước <svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg></a></div></div><div class="mb-8 p-8 text-justify bg-white shadow-lg dark:bg-gray-800 dark:text-gray-300"><p class="mb-2 italic leading-relaxed"> Tôi xin lỗi nếu bài viết có bất kỳ typo nào. Nếu bạn nhận thấy điều gì bất thường, xin hãy cho tôi biết. </p><p class="mb-8 leading-relaxed"> Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer">tạo discussion</a> hoặc <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer">report issue</a> trên Github. </p><div class="flex justify-between mb-4 text-gray-900 dark:text-gray-100"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Discussion</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg></a></div></div></div><div class="md:col-span-2 flex-shrink-0 p-6 bg-white text-sm leading-relaxed shadow-entry dark:bg-gray-800"><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Welcome </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><img width=262 height=262 src=/meow.webp alt=manhhomienbienthuy class="w-3/4 h-auto mx-auto mb-4 rounded-full"><p class="mb-10 text-justify">Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi…</p><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Bài viết liên quan </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="mb-10 divide-y"><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2016/03/08/python-class-decorator.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python class decorator" src=https://i.imgur.com/TMu6Ygls.png></a><a href=/2016/03/08/python-class-decorator.html> Python class decorator </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2016/01/05/python-iterator-generator.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python iterator & generator" src=https://i.imgur.com/6Q3UDiWs.png></a><a href=/2016/01/05/python-iterator-generator.html> Python iterator & generator </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2017/07/24/mot-vai-trick-python-ban-nhat-dinh-phai-biet-tren-con-duong-go-pro.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Một vài trick Python bạn nhất định phải biết trên con đường go-pro" src=https://i.imgur.com/X9o9emks.jpg></a><a href=/2017/07/24/mot-vai-trick-python-ban-nhat-dinh-phai-biet-tren-con-duong-go-pro.html> Một vài trick Python bạn nhất định phải biết trên con đường go-pro </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2016/02/23/python-metaclass.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python metaclass" src=https://i.imgur.com/HBnf0wVs.png></a><a href=/2016/02/23/python-metaclass.html> Python metaclass </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2015/12/22/tim-hieu-python-decorators.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Tìm hiểu Python decorators" src=https://i.imgur.com/Y20vNKls.png></a><a href=/2015/12/22/tim-hieu-python-decorators.html> Tìm hiểu Python decorators </a></div></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Bài viết mới </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="divide-y mb-10"><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/05/06/postgresql-vs-mysql.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="PostgreSQL vs MySQL" src=https://i.imgur.com/5d93N7Fs.png></a><a href=/2022/05/06/postgresql-vs-mysql.html> PostgreSQL vs MySQL </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/04/11/nodejs-blocking-non-blocking-io.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="NodeJS: Blocking & Non-blocking I/O" src=https://i.imgur.com/9ql6xWws.png></a><a href=/2022/04/11/nodejs-blocking-non-blocking-io.html> NodeJS: Blocking & Non-blocking I/O </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/04/01/hieu-hon-javascript-object-prototype-va-class.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Hiểu hơn JavaScript: Object, Prototype và Class" src=https://i.imgur.com/0OW5FHzs.png></a><a href=/2022/04/01/hieu-hon-javascript-object-prototype-va-class.html> Hiểu hơn JavaScript: Object, Prototype và Class </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/03/16/dung-dung-last-n-versions-voi-browserslist.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Đừng dùng last n versions với browserslist" src=https://i.imgur.com/WyMHkO5s.jpg></a><a href=/2022/03/16/dung-dung-last-n-versions-voi-browserslist.html> Đừng dùng last n versions với browserslist </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/03/01/so-sanh-nho-typescript-vs-javascript.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="So sánh nhỏ: TypeScript vs JavaScript" src=https://i.imgur.com/UNFe3Hxs.jpg></a><a href=/2022/03/01/so-sanh-nho-typescript-vs-javascript.html> So sánh nhỏ: TypeScript vs JavaScript </a></div></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Chuyên mục </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="flex flex-wrap gap-2 mb-10 text-xs dark:border-gray-100"><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/cuoc-song.html> Cuộc sống </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/du-lich.html> Du lịch </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/lap-trinh.html> Lập trình </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/tong-hop.html> Tổng hợp </a></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Lưu trữ theo năm </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="flex flex-wrap gap-[0.57rem] mb-10 text-xs"><a href=/2022/ class="py-1 w-10 text-white text-center bg-crimson"> 2022 </a><a href=/2021/ class="py-1 w-10 text-white text-center bg-crimson"> 2021 </a><a href=/2020/ class="py-1 w-10 text-white text-center bg-crimson"> 2020 </a><a href=/2019/ class="py-1 w-10 text-white text-center bg-crimson"> 2019 </a><a href=/2018/ class="py-1 w-10 text-white text-center bg-crimson"> 2018 </a><a href=/2017/ class="py-1 w-10 text-white text-center bg-crimson"> 2017 </a><a href=/2016/ class="py-1 w-10 text-white text-center bg-crimson"> 2016 </a><a href=/2015/ class="py-1 w-10 text-white text-center bg-crimson"> 2015 </a><a href=/2014/ class="py-1 w-10 text-white text-center bg-crimson"> 2014 </a><a href=/2013/ class="py-1 w-10 text-white text-center bg-crimson"> 2013 </a><a href=/2012/ class="py-1 w-10 text-white text-center bg-crimson"> 2012 </a><a href=/2011/ class="py-1 w-10 text-white text-center bg-crimson"> 2011 </a><a href=/2010/ class="py-1 w-10 text-white text-center bg-crimson"> 2010 </a></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Câu nói yêu thích </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><p class=text-justify><q>There's a big difference between knowing the name of something and knowing something.</q></p><p class="mt-2 mb-8 text-right text-indigo-500">– Richard P. Feynman –</p><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Thông tin liên hệ </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><p class="mb-8 text-justify"> Cảm ơn bạn đã quan tâm blog của tôi. Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer">tạo discussion</a> hoặc <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer">report issue</a> trên Github. </p><div class="flex justify-between mb-8 text-gray-900 dark:text-gray-100"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Discussion</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg></a></div></div></div><a href=# class="jsBackToTop fixed z-50 bottom-4 right-4 block hidden w-10 h-10 text-white bg-crimson rounded-full"><svg xmlns=http://www.w3.org/2000/svg class="h-10 w-10" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Back to Top</title><path stroke-linecap=round stroke-linejoin=round stroke-width=4 d="M7 11l5-5m0 0l5 5m-5-5v12"/></svg></a></main><footer class="mt-8 text-white"><div class=bg-gray-800><div class="grid grid-cols-1 md:grid-cols-3 md:gap-8 max-w-screen-xl mx-auto px-4 leading-loose text-justify"><div class=py-8><a href=/ title="Blog | manhhomienbienthuy"><svg width=1000 height=165 version=1.0 viewbox="0 0 1000 165" fill=currentColor class="w-full h-auto text-white" xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg></a><div class="flex items-center mb-4 gap-4"><img width=56 height=56 class="h-16 w-16 rounded-full" src=/meow.webp alt=manhhomienbienthuy><p> manhhomienbienthuy<br> salaried coder </p></div></div><div class=py-8><p class=mb-4> Trang web này được viết bằng tất cả ♥ và tinh thần của tôi, dành tặng cho tình yêu của tôi, yunachan. </p><p class=mb-4> Trang web được lưu trữ trên <a class=font-bold href=https://manhhomienbienthuy.github.io>GitHub Pages</a>, hình ảnh được lưu trữ trên các trang <a class=font-bold href=https://manhhomienbienthuy.imgur.com/ target=_blank rel="noopener noreferrer">imgur</a>, <a class=font-bold href=https://instagram.com/manhhomienbienthuy/ target=_blank rel="noopener noreferrer">Instagram</a> và <a class=font-bold href=https://photos.google.com/ target=_blank rel="noopener noreferrer">Google Photos</a>. </p><p class=mb-4> Nội dung trang web này được cấp phép theo giấy phép <a class=font-bold href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank rel="noopener noreferrer">CC BY-NC-ND 4.0</a>. </p><p> Cập nhật lần cuối lúc <a class=font-bold target=_blank rel="noopener noreferrer" href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=20220523T094453&p1=248">2022-05-23 09:44:53 (JST)</a> (rev: <code>30eea8c</code>). </p></div><div class=py-8><p class=mb-4> HTML được build bởi <a class=font-bold href=http://blog.getpelican.com/ target=_blank rel="noopener noreferrer">Pelican</a>, tự động hóa bằng <a class=font-bold target=_blank rel="noopener noreferrer" href=https://github.com/features/actions>GitHub Actions</a>, có sử dụng <a class=font-bold target=_blank href=https://python-markdown.github.io/ rel="noopener noreferrer">Python-Markdown</a>, <a class=font-bold target=_blank href=https://pygments.org/ rel="noopener noreferrer">Pygments</a> và nhiều công cụ khác. </p><p class=mb-4> Giao diện được làm dựa trên <a class=font-bold href=https://vanice-veethemes.blogspot.com/ target=_blank rel="noopener noreferrer">Vanice theme</a> với sự hỗ trợ của <a class=font-bold href=https://tailwindcss.com/ target=_blank rel="noopener noreferrer">Tailwind CSS</a> và <a class=font-bold target=_blank href=https://lisperator.net/uglifyjs/ rel="noopener noreferrer">UglifyJS</a>. Trang báo lỗi (404) được làm dựa trên <a href=https://github.com/mdjamal/tailwindcss-rails-custom-error-page-templates class=font-bold target=_blank rel="noopener noreferrer">chia sẻ này</a>. </p><p> Icon sử dụng kết hợp giữa <a class=font-bold href=https://heroicons.com/ target=_blank rel="noopener noreferrer">Heroicons</a> và <a class=font-bold href=https://icons.getbootstrap.com/ target=_blank rel="noopener noreferrer">Bootstrap Icons</a>. </p></div></div></div><div class=bg-gray-900><div class="flex flex-wrap justify-between max-w-screen-xl mx-auto px-4"><div class="pt-4 md:py-4"> Copyright © 2010–2022 <a href=/pages/gioi-thieu.html class=font-bold> manhhomienbienthuy </a></div><div class="flex-grow py-4 text-right divide-x divide-solid"><span class=px-2><a href=/ >Trang chủ</a></span><span class=px-2><a href=/pages/gioi-thieu.html>Giới thiệu</a></span><span class=pl-2><a href=#>Lên đầu trang ↑</a></span></div></div></div></footer><script defer src=/theme/js/app.min.js></script></body></html>