<!DOCTYPE html><html lang=vi class="html-padding antialiased"><head><meta charset=utf-8><title>Python metaclass | Blog | manhhomienbienthuy</title><meta name=viewport content="width=device-width, initial-scale=1"><link rel=apple-touch-icon href=/icon-touch.png><link rel=icon sizes=192x192 href=/icon-touch.png><link rel="shortcut icon" href=/favicon.ico><link rel=canonical href=https://manhhomienbienthuy.github.io/2016/02/23/python-metaclass.html><meta name=msapplication-TileImage content=/icon-tile.png><meta name=twitter:dnt content=on><meta name=Author content=manhhomienbienthuy><meta name=rating content=general><meta name=twitter:card content=product><meta name=twitter:site content=@_naa_4f><meta name=twitter:creator content=@_naa_4f><link type=application/rss+xml rel=alternate title="Blog | manhhomienbienthuy Full RSS Feed" href=https://manhhomienbienthuy.github.io/feeds/rss.xml><meta name=description content="Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi… Metaclass là một chủ đề khá ít người đề cập của Python. Một phần có lẽ bởi vì nó cũng ít được sử dụng, mà một phần lý do bởi vì Python cũng ít có tài liệu về chủ đề này. Trong bài viết này, tôi sẽ giới thiệu những […]"><meta name=keywords content="Python, metaclass, fundamental, blog, naa, manhhomienbienthuy, personal blog"><meta name=twitter:title content="Python metaclass | Blog | manhhomienbienthuy"><meta name=twitter:description content="Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi… Metaclass là một chủ đề khá ít người đề cập của Python. Một phần có lẽ bởi vì nó cũng ít được sử dụng, mà một phần lý do bởi vì Python cũng ít có tài liệu về chủ đề này. Trong bài viết này, tôi sẽ giới thiệu những […]"><meta name=twitter:image content=/https://i.imgur.com/HBnf0wV.png><link rel=stylesheet href=/theme/css/app.min.css><script>try{"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}catch{}</script></head><body class="text-gray-500 bg-gray-100 dark:bg-gray-700 dark:text-gray-300"><header class=mb-8><div class="fixed z-50 top-0 left-0 right-0 text-white bg-gray-900"><div class="relative flex flex-wrap justify-between items-center gap-x-4 max-w-screen-xl mx-auto px-4"><a href=/ class="my-2.5 rounded-full"><img width=20 height=20 class="h-5 w-5 rounded-full" src=/meow.webp alt=manhhomienbienthuy></a><div class="flex-grow flex items-center gap-x-0.5 md:hidden text-xs"><svg xmlns=http://www.w3.org/2000/svg class="jsMenuToggle h-5 w-5 cursor-pointer" fill=none viewbox="0 0 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 6h16M4 12h16M4 18h16"/></svg><span class="jsMenuToggle uppercase cursor-pointer">Menu</span></div><nav class="jsMenus hidden md:block flex-grow order-last md:order-none w-full md:w-auto text-xs uppercase bg-gray-900 divide-y md:divide-y-0"><a href=/ class="block md:inline p-4"> Trang chủ </a><a class="block md:inline p-4" href=/category/cuoc-song.html> Cuộc sống </a><a class="block md:inline p-4" href=/category/du-lich.html> Du lịch </a><a class="block md:inline p-4" href=/category/lap-trinh.html> Lập trình </a><a class="block md:inline p-4" href=/category/tong-hop.html> Tổng hợp </a></nav><div class="flex justify-between gap-x-3 items-center"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=/feeds/rss.xml target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-3 w-3" fill=currentColor viewbox="0 0 16 16"><title>RSS Feed</title><path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/><path d="M5.5 12a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-3-8.5a1 1 0 0 1 1-1c5.523 0 10 4.477 10 10a1 1 0 1 1-2 0 8 8 0 0 0-8-8 1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1 6 6 0 0 1 6 6 1 1 0 1 1-2 0 4 4 0 0 0-4-4 1 1 0 0 1-1-1z"/></svg></a><div class="flex items-center pl-2 border-l border-gray-800 text-gray-400 dark:text-gray-500"><button type=button id=jsThemeToggle><span class=dark:hidden><svg viewbox="0 0 24 24" fill=none stroke-width=2 stroke-linecap=round stroke-linejoin=round stroke=currentColor class="w-5 h-5"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg></span><span class="hidden dark:inline"><svg viewbox="0 0 24 24" fill=currentColor class="w-5 h-5"><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path fill-rule=evenodd clip-rule=evenodd d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z"/></svg></span></button></div></div></div><ul class="jsThemeMenus hidden absolute z-50 top-full right-2 w-36 mt-2 py-1 text-sm font-semibold bg-gray-100 dark:bg-gray-900 text-gray-400 dark:text-gray-500 rounded-lg shadow-lg overflow-hidden"><li class="py-1 px-2 flex items-center cursor-pointer" id=jsThemeLight><svg viewbox="0 0 24 24" fill=none stroke-width=2 stroke-linecap=round stroke-linejoin=round stroke=currentColor class="w-6 h-6 mr-2"><path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path d="M12 4v1M17.66 6.344l-.828.828M20.005 12.004h-1M17.66 17.664l-.828-.828M12 20.01V19M6.34 17.664l.835-.836M3.995 12.004h1.01M6 6l.835.836"/></svg> Light </li><li class="py-1 px-2 flex items-center cursor-pointer" id=jsThemeDark><svg viewbox="0 0 24 24" fill=currentColor class="w-6 h-6 mr-2"><path d="m17.715 15.15.95.316a1 1 0 0 0-1.445-1.185l.495.869ZM9 6.035l.846.534a1 1 0 0 0-1.14-1.49L9 6.035Zm8.221 8.246a5.47 5.47 0 0 1-2.72.718v2a7.47 7.47 0 0 0 3.71-.98l-.99-1.738Zm-2.72.718A5.5 5.5 0 0 1 9 9.5H7a7.5 7.5 0 0 0 7.5 7.5v-2ZM9 9.5c0-1.079.31-2.082.845-2.93L8.153 5.5A7.47 7.47 0 0 0 7 9.5h2Zm-4 3.368C5 10.089 6.815 7.75 9.292 6.99L8.706 5.08C5.397 6.094 3 9.201 3 12.867h2Zm6.042 6.136C7.718 19.003 5 16.268 5 12.867H3c0 4.48 3.588 8.136 8.042 8.136v-2Zm5.725-4.17c-.81 2.433-3.074 4.17-5.725 4.17v2c3.552 0 6.553-2.327 7.622-5.537l-1.897-.632Z"/><path fill-rule=evenodd clip-rule=evenodd d="M17 3a1 1 0 0 1 1 1 2 2 0 0 0 2 2 1 1 0 1 1 0 2 2 2 0 0 0-2 2 1 1 0 1 1-2 0 2 2 0 0 0-2-2 1 1 0 1 1 0-2 2 2 0 0 0 2-2 1 1 0 0 1 1-1Z"/></svg> Dark </li><li class="py-1 px-2 flex items-center cursor-pointer text-sky-500" id=jsThemeSystem><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6 mr-2 text-gray-400 dark:text-gray-500" fill=none viewbox="0 0 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap=round stroke-linejoin=round d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg> System </li></ul></div><div class="pt-10 md:pt-12 bg-white shadow dark:bg-gray-800 dark:text-gray-100"><div class="max-w-screen-xl mx-auto px-6 py-4"><a href=/ title="Blog | manhhomienbienthuy"><svg width=1000 height=165 version=1.0 viewbox="0 0 1000 165" fill=currentColor class="max-w-full max-h-24 w-auto h-auto mx-auto text-gray-900 dark:text-gray-100" xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg></a></div></div></header><main><div class="grid grid-cols-1 md:grid-cols-7 items-start gap-6 max-w-screen-xl mx-auto px-6"><div class=md:col-span-5><div class="bg-white p-8 shadow-lg dark:bg-gray-800"><h1 class="mb-4 text-3xl leading-relaxed font-bold text-gray-900 uppercase dark:text-gray-100"> Python metaclass </h1><img width=360 height=270 class="w-full h-auto mb-4" src=https://i.imgur.com/HBnf0wV.png alt="Python metaclass"><div class="flex flex-wrap gap-x-4 mb-10 py-2 text-sm leading-relaxed text-gray-400 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100"><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg><a href=/category/lap-trinh.html> Lập trình </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><a href=/2016> 2016-02-23 </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg><a href=/pages/gioi-thieu.html> manhhomienbienthuy </a></div><div><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg> 2021-07-28 13:47:48 (JST) </div></div><div class="md:text-lg leading-loose md:leading-loose text-justify"><p class=my-4>Metaclass là một chủ đề khá ít người đề cập của Python. Một phần có lẽ bởi vì nó cũng ít được sử dụng, mà một phần lý do bởi vì Python cũng ít có tài liệu về chủ đề này. Trong bài viết này, tôi sẽ giới thiệu những hiểu biết mình đã tổng hợp được từ nhiều nguồn khác nhau, liên qua tới metaclass của Python. Có thể nó ít được sử dụng bởi nó cũng không cần thiết cho lắm, tuy nhiên, hiểu biết cặn kẽ về ngôn ngữ không bao giờ là thừa cả.</p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Những code trong bài viết này đề sử dụng Python 3, nên có thể nó sẽ không hoạt động đúng với Python 2.</p></blockquote><div class="p-2 text-xs leading-relaxed bg-gray-100 whitespace-nowrap overflow-auto dark:bg-gray-900"><span class="font-semibold text-sm text-gray-900 mb-4 dark:text-gray-100">Mục lục</span><ul><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#khai-niem-co-ban>Khái niệm cơ bản</a><ul class=ml-5><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#class-cung-la-oi-tuong>Class cũng là đối tượng</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tao-ra-cac-class-ong>Tạo ra các class động</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#su-dung-metaclass-co-ban>Sử dụng metaclass cơ bản</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tong-ket-the-nao-la-metaclass>Tổng kết: Thế nào là metaclass</a></li></ul></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#kien-thuc-nang-cao>Kiến thức nâng cao</a><ul class=ml-5><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#qua-trinh-tao-instance>Quá trình tạo instance</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#qua-trinh-tao-class>Quá trình tạo class</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#metaclass-la-callable>Metaclass là callable</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#class-con-ke-thua-metaclass>Class con kế thừa metaclass</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#han-che-dung-nhieu-metaclass>Hạn chế dùng nhiều metaclass</a></li></ul></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#magic-method>Magic method</a><ul class=ml-5><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#slot>Slot</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tham-chieu-thuoc-tinh-cua-oi-tuong>Tham chiếu thuộc tính của đối tượng</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tham-chieu-thuoc-tinh-cua-class>Tham chiếu thuộc tính của class</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tham-chieu-magic-method>Tham chiếu magic method</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#phuong-thuc-__new__>Phương thức __new__</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#phuong-thuc-__prepare__>Phương thức __prepare__</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#chu-ky-cua-phuong-thuc>Chữ ký của phương thức</a></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#tai-sao-chung-ta-nen-dung-metaclass>Tại sao chúng ta nên dùng metaclass?</a></li></ul></li><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=#ket-luan>Kết luận</a></li></ul></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=khai-niem-co-ban><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#khai-niem-co-ban title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Khái niệm cơ bản</h2><p class=my-4>Chúng ta sẽ dần dần tìm hiểu từng khái niệm, từ cơ bản đến nâng cao để có thể hiểu được metaclass của Python.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=class-cung-la-oi-tuong><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#class-cung-la-oi-tuong title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Class cũng là đối tượng</h3><p class=my-4>Trước khi hiểu được metaclass, chúng ta cần hiểu được class của Python trước. Python có những ý tưởng rất bá đạo về việc xây dựng class, lấy cảm hứng từ ngôn ngữ <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/Smalltalk rel="noopener noreferrer" target=_blank>Smalltalk</a>.</p><p class=my-4>Trong phần lớn ngôn ngữ lập trình, class là phần code miêu tả cách tạo ra các đối tượng. Python cũng tương tự như vậy.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>bar</span> <span class=o>=</span> <span class=n>Foo</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>bar</span><span class=p>)</span>
<span class=go>&lt;__main__.Foo object at 0x7f9eba142ba8&gt;</span>
</code></pre></div><p class=my-4>Nhưng không chỉ có vậy, trong Python, <strong>class cũng là đối tượng</strong>. Ngay khi bạn sử dụng từ khóa <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">class</code>, Python sẽ thực thi nó là tạo ra một đối tượng.</p><p class=my-4>Ví dụ, khi bạn khai báo class</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
</code></pre></div><p class=my-4>Thì trong bộ nhớ, một đối tượng tên là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Foo</code> sẽ được tạo ra. Tuy nhiên, đây là một đối tượng đặc biệt, đối tượng dùng để tạo ra các đối tượng khác (instance của class). Tuy nhiên, vì là một đối tượng, nên bạn có thể:</p><ul class="list-disc ml-5"><li>gán chúng cho các biến</li><li>copy nó</li><li>thêm thuộc tính cho nó</li><li>dùng nó làm tham số cho các hàm</li></ul><p class=my-4>Ví dụ:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span> <span class=c1># bạn có thể print vì class cũng là đối tượng</span>
<span class=go>&lt;class '__main__.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>echo</span><span class=p>(</span><span class=n>o</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=n>o</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>echo</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span> <span class=c1># bạn có thể truyền class làm tham số cho hàm</span>
<span class=go>&lt;class '__main__.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=nb>hasattr</span><span class=p>(</span><span class=n>Foo</span><span class=p>,</span> <span class=s1>'attribute'</span><span class=p>))</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>Foo</span><span class=o>.</span><span class=n>attribute</span> <span class=o>=</span> <span class=s1>'foo'</span> <span class=c1># bạn có thể thêm thuộc tính cho class</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=nb>hasattr</span><span class=p>(</span><span class=n>Foo</span><span class=p>,</span> <span class=s1>'attribute'</span><span class=p>))</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=o>.</span><span class=n>attribute</span><span class=p>)</span>
<span class=go>foo</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>FooCopy</span> <span class=o>=</span> <span class=n>Foo</span> <span class=c1># bạn có thể gán class cho biến</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>FooCopy</span><span class=o>.</span><span class=n>attribute</span><span class=p>)</span>
<span class=go>foo</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>FooCopy</span><span class=p>())</span>
<span class=go>&lt;__main__.Foo object at 0x7f9eba142da0&gt;</span>
</code></pre></div><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tao-ra-cac-class-ong><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tao-ra-cac-class-ong title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tạo ra các class động</h3><p class=my-4>Bởi vì class cũng là đối tượng, nên chúng ta có thể tạo ra các class động, giống như tất cả các đối tượng khác.</p><p class=my-4>Trước hết, bạn có thể tạo ra class trong một hàm như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>choose_class</span><span class=p>(</span><span class=n>name</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>if</span> <span class=n>name</span> <span class=o>==</span> <span class=s1>'foo'</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>            <span class=k>pass</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>Foo</span> <span class=c1># return class chứ không phải instance</span>
<span class=gp>... </span>    <span class=k>else</span><span class=p>:</span>
<span class=gp>... </span>        <span class=k>class</span> <span class=nc>Bar</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>            <span class=k>pass</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>Bar</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>MyClass</span> <span class=o>=</span> <span class=n>choose_class</span><span class=p>(</span><span class=s1>'foo'</span><span class=p>)</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>MyClass</span><span class=p>)</span> <span class=c1># in ra class</span>
<span class=go>&lt;class '__main__.choose_class.&lt;locals&gt;.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>MyClass</span><span class=p>())</span> <span class=c1># tạo ra một instance của class</span>
<span class=go>&lt;__main__.choose_class.&lt;locals&gt;.Foo object at 0x7f9eba142eb8&gt;</span>
</code></pre></div><p class=my-4>Tuy nhiên, như vậy cũng chưa phải là động lắm, bởi vì bạn vẫn cần phải code toàn bộ nội dung của class. Bởi vì class cũng là đối tượng, nó nhất định được tạo ra bởi một thứ gì khác.</p><p class=my-4>Khi bạn dùng từ khóa <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">class</code>, Python tự động tạo đối tượng đó cho bạn. Tuy nhiên, bạn vẫn có thể làm việc này bằng tay.</p><p class=my-4>Python có hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>, cho chúng ta biết loại của đối tượng được truyền vào.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>type</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=go>&lt;class 'int'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>type</span><span class=p>(</span><span class=s2>"1"</span><span class=p>)</span>
<span class=go>&lt;class 'str'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>type</span><span class=p>(</span><span class=n>Foo</span><span class=p>())</span>
<span class=go>&lt;class '__main__.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>type</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span>
<span class=go>&lt;class 'type'&gt;</span>
</code></pre></div><p class=my-4>Như vậy, hàm type có thể cho chúng ta biến class của đối tượng được truyền vào. Nó cũng tương tự như hàm <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">isinstance</code> vậy. Và bạn có để ý kết quả của ví dụ cuối cùng ở trên không? Class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Foo</code> là instance của class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>isinstance</span><span class=p>(</span><span class=n>bar</span><span class=p>,</span> <span class=n>Foo</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>isinstance</span><span class=p>(</span><span class=n>Foo</span><span class=p>,</span> <span class=nb>type</span><span class=p>)</span>
<span class=go>True</span>
</code></pre></div><p class=my-4>Vậy là class cũng là đối tượng, và đối tượng này được tạo bởi một thứ khác. Chúng ta gọi những thứ tạo ra class đó là là metaclass. Và như ví dụ trên, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> là một metaclass như thế. Chúng ta có thể khái quát mối quan hệ đó bằng sơ đồ dưới đây.</p><p class=my-4><img alt=relations class="w-auto h-auto mx-auto" height=270 loading=lazy src=https://i.imgur.com/hbNFgPW.png width=360></p><p class=my-4>Mọi thứ trong Python, bất kể số, xâu, hàm, phương thức, v.v đều là đối tượng trong Python. Tất cả chúng đều là đối tượng, nên chúng phải được tạo ra bởi một class. Và chúng đều có thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__class__</code> để chúng ta kiểm tra việc này.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>age</span> <span class=o>=</span> <span class=mi>25</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>age</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'int'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>name</span> <span class=o>=</span> <span class=s2>"AnhTN"</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>name</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'str'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>foo</span><span class=p>():</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'function'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Bar</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>bar</span> <span class=o>=</span> <span class=n>Bar</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>bar</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class '__main__.Bar'&gt;</span>
</code></pre></div><p class=my-4>Bây giờ, chúng ta sẽ kiểm tra <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__class__</code> của mọi class?</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>age</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'type'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>name</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'type'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'type'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>bar</span><span class=o>.</span><span class=vm>__class__</span><span class=o>.</span><span class=vm>__class__</span>
<span class=go>&lt;class 'type'&gt;</span>
</code></pre></div><p class=my-4>Vậy, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> là một metaclass có sẵn của Python. Và mặc định, các class trong Python đều được tạo ra bởi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>. Tất nhiên là bạn có thể tạo ra metaclass của riêng mình nếu muốn. Chúng ta sẽ dần dần tìm hiểu trong những phần tiếp theo.</p><p class=my-4>Bây giờ, chúng ta sẽ tìm hiểu kỹ hơn về quá trình tạo ra một class.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=su-dung-metaclass-co-ban><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#su-dung-metaclass-co-ban title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Sử dụng metaclass cơ bản</h3><p class=my-4>Ở ví dụ trước, chúng ta đã thấy, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> là một hàm cho chúng ta biết class được dùng để tạo ra đối tượng. Và sau đó, chúng ta lại thấy, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> còn có khá năng khác nữa. Nó là một metaclass được dùng để tạo ra các class.</p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Một hàm và một metaclass có cùng tên nên nhiều khi nó gây hiểu nhầm. Đây là vấn đề liên quan đến tương thích ngược của Python nên vấn đề sẽ còn tồn tại, không biết đến bao giờ.</p></blockquote><p class=my-4><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> (metaclass) sẽ nhận đầu vào là những mô tả của class và trả kết quả là một class.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=nb>type</span><span class=p>(</span><span class=o>&lt;</span><span class=n>name</span> <span class=n>of</span> <span class=n>the</span> <span class=n>class</span><span class=o>&gt;</span><span class=p>,</span>
     <span class=o>&lt;</span><span class=nb>tuple</span> <span class=n>of</span> <span class=n>the</span> <span class=n>parent</span> <span class=k>class</span> <span class=err>(</span><span class=nc>for</span> <span class=n>inheritance</span><span class=p>,</span> <span class=n>can</span> <span class=n>be</span> <span class=n>empty</span><span class=p>)</span><span class=o>&gt;</span><span class=p>,</span>
     <span class=o>&lt;</span><span class=n>dictionary</span> <span class=n>containing</span> <span class=n>attributes</span> <span class=n>names</span> <span class=ow>and</span> <span class=n>values</span><span class=p>)</span><span class=o>&gt;</span>
</code></pre></div><p class=my-4>Ví dụ:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
</code></pre></div><p class=my-4>Có thể thực hiện bằng tay như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Foo</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=s1>'Foo'</span><span class=p>,</span> <span class=p>(),</span> <span class=p>{})</span> <span class=c1># kết quả trả về là một class</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span>
<span class=go>&lt;class '__main__.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=p>())</span> <span class=c1># tạo một instance của class `Foo`</span>
<span class=go>&lt;__main__.Foo object at 0x7f9eba142f98&gt;</span>
</code></pre></div><p class=my-4>Trong ví dụ trên, chúng ta sử dụng tên <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Foo</code> làm tên của class và cũng là biến nhận kết quả trả về của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>. Kết quả trả về này chính là một class tên <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Foo</code>. Tất nhiên là chúng ta có thể dùng một biến với tên khác, nhưng như vậy sẽ khó hiểu hơn kha khá.</p><p class=my-4><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> chấp nhận một dictionary định nghĩa các thuộc tính của class đó. Nên:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=gp>... </span>    <span class=n>bar</span> <span class=o>=</span> <span class=kc>True</span>
<span class=gp>...</span>
</code></pre></div><p class=my-4>Có thể thực hiện bằng</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Foo</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=s1>'Foo'</span><span class=p>,</span> <span class=p>(),</span> <span class=p>{</span><span class=s1>'bar'</span><span class=p>:</span> <span class=kc>True</span><span class=p>})</span>
</code></pre></div><p class=my-4>Và chúng ta có thể sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Foo</code> như những class bình thường khác.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span>
<span class=go>&lt;class '__main__.Foo'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=o>.</span><span class=n>bar</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo</span> <span class=o>=</span> <span class=n>Foo</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>foo</span><span class=p>)</span>
<span class=go>&lt;__main__.Foo object at 0x7f9eba142f98&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>foo</span><span class=o>.</span><span class=n>bar</span><span class=p>)</span>
<span class=go>True</span>
</code></pre></div><p class=my-4>Chúng ta cũng có thể sử dụng cách này với các class kế thừa nhau. Ví dụ:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooChild</span><span class=p>(</span><span class=n>Foo</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
</code></pre></div><p class=my-4>có thể thực hiện bằng:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>FooChild</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=s1>'FooChild'</span><span class=p>,</span> <span class=p>(</span><span class=n>Foo</span><span class=p>,),</span> <span class=p>{})</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>FooChild</span><span class=p>)</span>
<span class=go>&lt;class '__main__.FooChild'&gt;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>FooChild</span><span class=o>.</span><span class=n>bar</span><span class=p>)</span> <span class=c1># thuộc tính `bar` kế thừa từ `Foo`</span>
<span class=go>True</span>
</code></pre></div><p class=my-4>Nếu bạn muốn thêm phương thức cho class của bạn. Rất đơn giản, hãy định nghĩa một hàm với tham số phù hợp (<code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">self</code>) và gán nó như là thuộc tính của class.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>echo_bar</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>bar</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>FooChild</span> <span class=o>=</span> <span class=nb>type</span><span class=p>(</span><span class=s1>'FooChild'</span><span class=p>,</span> <span class=p>(</span><span class=n>Foo</span><span class=p>,</span> <span class=p>),</span> <span class=p>{</span><span class=s1>'echo_bar'</span><span class=p>:</span> <span class=n>echo_bar</span><span class=p>})</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>hasattr</span><span class=p>(</span><span class=n>Foo</span><span class=p>,</span> <span class=s1>'echo_bar'</span><span class=p>)</span>
<span class=go>False</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>hasattr</span><span class=p>(</span><span class=n>FooChild</span><span class=p>,</span> <span class=s1>'echo_bar'</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo_child</span> <span class=o>=</span> <span class=n>FooChild</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo_child</span><span class=o>.</span><span class=n>echo_bar</span><span class=p>()</span>
<span class=go>True</span>
</code></pre></div><p class=my-4>Bạn cũng có thể thêm các thuộc tính kể cả khi class đã được định nghĩa rồi, giống như thêm phương thức cho các class thông thường khác.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>def</span> <span class=nf>more_method</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nb>print</span><span class=p>(</span><span class=s2>"Another method"</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>FooChild</span><span class=o>.</span><span class=n>more_method</span> <span class=o>=</span> <span class=n>more_method</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>hasattr</span><span class=p>(</span><span class=n>FooChild</span><span class=p>,</span> <span class=s1>'more_method'</span><span class=p>)</span>
<span class=go>True</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foo_child</span><span class=o>.</span><span class=n>more_method</span><span class=p>()</span>
<span class=go>Another method</span>
</code></pre></div><p class=my-4>Bài học rút ra là gì? Đó là class của Python cũng là đối tượng, và chúng ta có thể tạo ra chúng động, tạo ra khi cần và thêm thuộc tính nếu muốn.</p><p class=my-4>Và class là một đối tượng đặc biệt, nó được tạo ra bởi metaclass. Bản thân lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">class</code> cũng chứa nhiều bí ẩn phía sau. Đó là thiết lập các thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__qualname__</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__doc__</code>, cũng như gọi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__prepare__</code>. Chúng ta sẽ tìm hiểu về chúng ở phần sau.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tong-ket-the-nao-la-metaclass><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tong-ket-the-nao-la-metaclass title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tổng kết: Thế nào là metaclass</h3><p class=my-4>Class là công cụ để tạo ra các đối tượng. Bạn định nghĩa class và sau đó dùng class để tạo ra các đối tượng.</p><p class=my-4>Và bây giờ, chúng ta biết rằng, class của Python cũng là đối tượng (đặc biệt). Và metaclass là công cụ để tạo ra những đối tượng đặc biệt này. Metaclass có thể gọi là class của class.</p><p class=my-4>Và chúng ta cũng học cách sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> để tạo ra các class. Đó là bởi vì <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> cũng là metaclass. Và thực sự <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> là metaclass của mọi class trong Python.</p><p class=my-4>Có khi nào bạn thắc mắc, tại sao class của class (<code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>) lại chỉ viết thường không? Tại sao không phải là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Type</code>?</p><p class=my-4>Thực ra tôi cũng không biết, nhưng chắc nó cũng tương tự như trường hợp của các class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">int</code> (số nguyên), <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">str</code> (xâu ký tự). <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> cũng là một class để tạo ra các class khác.</p><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=kien-thuc-nang-cao><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#kien-thuc-nang-cao title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Kiến thức nâng cao</h2><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=qua-trinh-tao-instance><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#qua-trinh-tao-instance title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Quá trình tạo instance</h3><p class=my-4>Sơ đồ dưới đây minh hoạt quá trình tạo ra một instance:</p><p class=my-4><img alt="instance creation workflow" class="w-auto h-auto mx-auto" height=270 loading=lazy src=https://i.imgur.com/TGx1s0r.png width=360></p><p class=my-4>Sơ đồ trên có thể hiểu như sau:</p><ul class="list-disc ml-5"><li>Khi tạo một instance <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__call__</code> sẽ gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__new__</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__new__</code> sẽ trả về một instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__call__</code> sẽ trả về bất cứ thứ gì mà <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__new__</code> trả về. Nếu một instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code> được trả về thì nó sẽ gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__init__</code>.</li></ul><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=qua-trinh-tao-class><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#qua-trinh-tao-class title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Quá trình tạo class</h3><p class=my-4>Việc tạo ra class, thực ra là tạo một instance của metaclass, nên cũng tương tự như vậy:</p><p class=my-4><img alt="class creation workflow" class="w-auto h-auto mx-auto" height=270 loading=lazy src=https://i.imgur.com/LIe9mTX.png width=360></p><p class=my-4>Một số lưu ý:</p><ul class="list-disc ml-5"><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__prepare__</code> trả về một đối tượng làm namespace.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__new__</code> trả về đối tượng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">MetaMetaclass.__call__</code> trả về bất cứ thứ gì <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__new__</code> trả về. Nếu nó trả về một instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass</code> thì nó cũng gọi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__init__</code>.</li></ul><p class=my-4>Các phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__prepare__</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code>, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> được gọi là magic method. Và chúng ta sẽ tìm hiểu về chúng kỹ hơn ở phần sau.</p><p class=my-4>Như vậy, metaclass cho phép chúng ta thay đổi hầu hết các bước trong vòng đời của một đối tượng.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=metaclass-la-callable><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#metaclass-la-callable title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Metaclass là callable</h3><p class=my-4>Nhìn vào sơ đồ trên, bạn sẽ để ý rằng, việc tạo ra một instance phải đi qua <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__call__</code>. Điều đó có nghĩa là bạn có thể dùng bất cứ callable nào làm metaclass.</p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2">Callable là bất cứ thứ gì có thể gọi và thực thi được. Một đối tượng là callable nếu:</p><ul class="list-disc ml-5"><li>là một instance của class có phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__call__</code></li><li>một loại dữ liệu có thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">tp_call</code> (struct của C)</li></ul><p class="my-4 mb-2">Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__call__</code> được gọi khi instance được gọi như một hàm.</p></blockquote><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Foo</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=nb>print</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=go>..</span>
<span class=go>Foo () {'__module__': '__main__', '__qualname__': 'Foo'}</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>print</span><span class=p>(</span><span class=n>Foo</span><span class=p>)</span>
<span class=go>None</span>
</code></pre></div><p class=my-4>Nếu bạn sử dụng <strong>hàm</strong> làm metaclass, thì các class sẽ không kế thừa thừ metaclass của hàm đó, mà nó sử dụng bất cứ thứ gì mà hàm đó trả về.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=class-con-ke-thua-metaclass><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#class-con-ke-thua-metaclass title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Class con kế thừa metaclass</h3><p class=my-4>Một lợi ích so sánh với các class decorator là class con kế thừa metaclass.</p><p class=my-4>Đây là kết quả của việc <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__call__</code> trả kết quả là một đối tượng có <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__class__</code> là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass</code>.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=han-che-dung-nhieu-metaclass><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#han-che-dung-nhieu-metaclass title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Hạn chế dùng nhiều metaclass</h3><p class=my-4>Python cho phép bạn định nghĩa một class kế thừa từ nhiều class khác nhau. Python cũng cho phép chúng ta định nghĩa nhiều metaclass khác nhau. Tuy nhiên, có một yêu cầu bắt buộc, đó là mọi thứ phải tuyến tính - cây kế thừa chỉ có 1 lá duy nhất.</p><p class=my-4>Trong ví dụ dưới đây, việc kế thừa không được phép vì đang tồn tại hai lá (<code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Meta1</code> và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Meta2</code>)</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Meta1</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Meta2</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Base1</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta1</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Base2</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>(</span><span class=n>Base1</span><span class=p>,</span> <span class=n>Base2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>"&lt;stdin&gt;"</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>TypeError</span>: <span class=n>metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases</span>
</code></pre></div><p class=my-4>Nhưng ví dụ dưới đây lại hoạt động bình thường (metaclass là lá trong cây kế thừa)</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Meta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>SubMeta</span><span class=p>(</span><span class=n>Meta</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Base1</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Base2</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>SubMeta</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>(</span><span class=n>Base1</span><span class=p>,</span> <span class=n>Base2</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>type</span><span class=p>(</span><span class=n>FooBar</span><span class=p>)</span>
<span class=go>&lt;class '__main__.SubMeta'&gt;</span>
</code></pre></div><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=magic-method><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#magic-method title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Magic method</h2><p class=my-4>Một tính năng rất đặc trưng của Python mà <strong>magic method</strong>: nó cho phép lập trình viên có thể thay đổi hoạt động của các phép toán và cả các đối tượng. Bạn có thể làm nó như ví dụ dưới đây:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>:</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s2>"Class works like a function"</span><span class=p>)</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span> <span class=o>=</span> <span class=n>FooBar</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>f</span><span class=p>()</span>
<span class=go>Class works like a function</span>
</code></pre></div><p class=my-4>Metaclass hoạt động dựa vào rất nhiều magic method khác nhau, nên việc tìm hiểu chúng khá cần thiết.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=slot><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#slot title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Slot</h3><p class=my-4>Khi bạn định nghĩa một magic method trong class của bạn, hàm đó sẽ hoạt động giống như một pointer trong <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/c-api/typeobj.html rel="noopener noreferrer" target=_blank><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">struct</code> dùng để mô tả class</a>. Hơn nữa, nó còn là một phần trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__dict__</code>. Struct đó có các trường cho mỗi magic method, vì nhiều lý do mà các trường này được gọi là <strong>type slot</strong>, mỗi magic method sẽ có một type slot tương ứng.</p><p class=my-4>Và chúng ta biết thêm một tính năng nữa. Đó là cài đặt thuộc tính thông qua thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__slots__</code>. Ví dụ như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>:</span>
<span class=gp>... </span>    <span class=vm>__slots__</span> <span class=o>=</span> <span class=s2>"foo"</span><span class=p>,</span> <span class=s2>"bar"</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foobar</span> <span class=o>=</span> <span class=n>FooBar</span><span class=p>()</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foobar</span><span class=o>.</span><span class=n>foo</span> <span class=o>=</span> <span class=mi>1</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>foobar</span><span class=o>.</span><span class=n>bar</span> <span class=o>=</span> <span class=mi>2</span>
</code></pre></div><p class=my-4>Một class có thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__slots__</code> sẽ tạo ra các instance không có thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__dict__</code> (và do đó, sẽ dùng ít bộ nhớ hơn).</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>foobar</span><span class=o>.</span><span class=vm>__dict__</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>"&lt;stdin&gt;"</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>AttributeError</span>: <span class=n>'FooBar' object has no attribute '__dict__'</span>
</code></pre></div><p class=my-4>Một hệ quả của việc này là instance của chúng ta không thể thêm bất cứ thuộc tính nào ngoài những thuộc tính đã được định nghĩa từ trước. Nếu cố cho thêm thuộc tính mới, bạn sẽ nhận được <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">AttributeError</code>:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>foobar</span><span class=o>.</span><span class=n>more_attr</span> <span class=o>=</span> <span class=mi>3</span>
<span class=gt>Traceback (most recent call last):</span>
  File <span class=nb>"&lt;stdin&gt;"</span>, line <span class=m>1</span>, in <span class=n>&lt;module&gt;</span>
<span class=gr>AttributeError</span>: <span class=n>'FooBar' object has no attribute 'more_attr'</span>
</code></pre></div><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tham-chieu-thuoc-tinh-cua-oi-tuong><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tham-chieu-thuoc-tinh-cua-oi-tuong title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tham chiếu thuộc tính của đối tượng</h3><p class=my-4>Những điều dưới đây có thể gây nhầm lần bởi nó hơi khác một chút so với Python 2.</p><p class=my-4>Giả sử <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code> là một class có instance là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">instance</code>. Nếu chúng ta cần gọi đến thuộc tính <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">instance.foobar</code>, quá trình sẽ diễn ra như sau:</p><ul class="list-disc ml-5"><li>Mặc định sẽ là gọi type slot cho <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__getattribute__ (tp_getattro)</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> có phải là một data descriptor trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__</code> hay không?<ul class="list-disc ml-5"><li>Nếu có, trả về kết quả của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__['foobar'].__get__(instance, Class)</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> có phải là một phần tử của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">instance.__dict__</code> hay không?<ul class="list-disc ml-5"><li>Nếu có, trả về kết quả <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">instance.__dict__['foobar']</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> là một phần tử trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__</code> nhưng không phải là data descriptor?<ul class="list-disc ml-5"><li>Nếu đúng, trả về kết quả của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__['foobar'].__get__(instance, klass)</code>.</li></ul></li><li>Nếu thuộc tính vẫn không được tìm thấy, nếu có tồn tại <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__getattr__</code> thì gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__getattr__('foobar')</code>.</li></ul><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Data descriptor là một đối tượng có cả phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__get__</code> và phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__set__</code>. <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://docs.python.org/3/reference/datamodel.html#invoking-descriptors rel="noopener noreferrer" target=_blank>Tham khảo</a>.</p></blockquote><p class=my-4>Sơ đồ sau sẽ minh họa cho quá trình này.</p><p class=my-4><img alt="objects attribute lookup" class="w-auto h-auto mx-auto" height=270 loading=lazy src=https://i.imgur.com/e2bZfqf.png width=360></p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Trong sơ đồ trên, dấu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">:</code> được dùng thay cho dấu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">.</code> để tránh những hiểu nhầm đáng tiếc.</p></blockquote><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tham-chieu-thuoc-tinh-cua-class><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tham-chieu-thuoc-tinh-cua-class title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tham chiếu thuộc tính của class</h3><p class=my-4>Bởi vì class còn phải hỗ trợ các phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">classmethod</code> và <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">staticmethod</code> nên quá trình tham chiếu có phức tạp hơn một chút. Nếu bạn gọi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.foobar</code> quá trình này tương đối khác với việc tham chiếu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">instance.foobar</code>.</p><p class=my-4>Giả sử <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code> có metaclass là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass</code>, quá trình tham chiếu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.foobar</code> sẽ diễn ra như sau:</p><ul class="list-disc ml-5"><li>Mặc định là sẽ gọi type slot cho <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__getattribute__ (tp_getattro)</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> là data descriptor trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__</code>?<ul class="list-disc ml-5"><li>Nếu đúng, trả về kết quả của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__['foobar'].__get__(Class, Metaclass)</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> tồn tại bên trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__</code> và có thể là bất kỳ descriptor nào?<ul class="list-disc ml-5"><li>Nếu đúng, trả về kết quả của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__['foobar'].__get__(None, Class)</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__</code> có chứa <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code>?<ul class="list-disc ml-5"><li>Nếu đúng, trả về <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class.__dict__['foobar']</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code> tồn tại trong <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__</code> nhưng không phải descriptor?<ul class="list-disc ml-5"><li>Nếu đúng, trả về kết quả <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__['foobar'].__get__(Class, Metaclass)</code>.</li></ul></li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__</code> có chứa <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">foobar</code>?<ul class="list-disc ml-5"><li>Nếu đúng, trả về <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__dict__['foobar']</code>.</li></ul></li><li>Nếu thuộc tính vẫn không tìm thấy, nếu tồn tại <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__getattr__</code>, thì gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__getattr__('foobar')</code>.</li></ul><p class=my-4>Toàn bộ quá trình được minh họa bằng sơ đồ dưới đây.</p><p class=my-4><img alt="classes attribute lookup" class="w-auto h-auto mx-auto" height=270 loading=lazy src=https://i.imgur.com/qRyONTI.png width=360></p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Cũng tương tự như trên, sơ đồ này sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">:</code> thay cho <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">.</code></p></blockquote><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tham-chieu-magic-method><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tham-chieu-magic-method title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tham chiếu magic method</h3><p class=my-4>Với magic method, việc tham chiếu được thực hiện này trong class, trực tiếp trong struct với type slot.</p><ul class="list-disc ml-5"><li>Class của đối tượng có slot cho magic method hay không (được gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">object-&gt;ob_type-&gt;tp_&lt;magicmethod&gt;</code> trong code C)? Nếu đúng, sử dụng type slot đó, nếu không, thao tác này không được hỗ trợ.</li></ul><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2">Theo diễn giải thông thường của ngôn ngữ C:</p><ul class="list-disc ml-5 mb-2"><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">object-&gt;ob_type</code> là class của đối tượng.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">ob_type-&gt;tp_&lt;magicmethod&gt;</code> là type slot.</li></ul></blockquote><p class=my-4>Việc tham chiếu có vẻ đơn giản hơn, tuy nhiên type slot được bao bọc bởi hàm của bạn, nên các data descriptor hoạt động tốt.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>:</span>
<span class=gp>... </span>    <span class=nd>@property</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>def</span> <span class=nf>inner</span><span class=p>():</span>
<span class=gp>... </span>            <span class=k>return</span> <span class=s2>"FooBar"</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=n>inner</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>repr</span><span class=p>(</span><span class=n>FooBar</span><span class=p>())</span>
<span class=go>'FooBar'</span>
</code></pre></div><p class=my-4>Quá trình tham chiếu ở trên, tôi nói là <strong>mặc định</strong>. Vậy có cách nào thay đổi được quá trình tham chiếu mặc định này hay không? Câu trả lời là có và chúng ta sẽ tìm hiểu trong phần tiếp sau đây.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=phuong-thuc-__new__><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#phuong-thuc-__new__ title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code></h3><p class=my-4>Một điểm dễ gây nhầm lần giữa class và metaclass chính là phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code>. Nó có một số quy ước rất đặc biệt.</p><p class=my-4>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code> là <strong>constructor</strong> (tạo đối tượng, kết quả trả về của nó là đối tượng mới), trong khi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> là <strong>initializer</strong> (khởi tạo giá trị ban đầu cho đối tượng, khi phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> được gọi, đối tượng đã tồn tại rồi).</p><p class=my-4>Giả sử chúng ta có class như dưới dây.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=k>class</span> <span class=nc>Foobar</span><span class=p>:</span>
    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>):</span>
        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
</code></pre></div><p class=my-4>Nếu bạn xem lại những phần trước, có thể bạn sẽ cho rằng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code> sẽ được tham chiếu ở metaclass. Nhưng không, nó được tham chiếu theo phương pháp <strong>tĩnh</strong>.</p><p class=my-4>Khi class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">FooBar</code> cần gọi magic phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code>, nó sẽ được tham chiếu trong chính đối tượng (class) đó, chứ không tham chiếu đến các class ở tầng cao hơn. Điều này rất quan trọng, bởi cả class mà metaclass có thể định nghĩa phương thức này.</p><ul class="list-disc ml-5"><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">FooBar.__new__</code> được dùng để tạo ra các instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">FooBar</code>.</li><li><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type.__new__</code> được dùng để tạo ra class <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">FooBar</code> (một instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>)</li></ul><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=phuong-thuc-__prepare__><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#phuong-thuc-__prepare__ title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__prepare__</code></h3><p class=my-4>Đây là phương thức của metaclass, nó sẽ được gọi trước khi code của class được thực thi, và phương thức bắt buộc phải trả về kết quả là một dict (hoặc tương tự một dict), kết quả này sau này sẽ được dùng làm namespace cho tất cả code của class. Phương thức này mới được thêm vào từ Python 3.0, bạn có thể tham khảo thêm ở <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://www.python.org/dev/peps/pep-3115/ rel="noopener noreferrer" target=_blank>PEP-3115</a>.</p><p class=my-4>Nếu phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__prepare__</code> trả về một đối tượng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">x</code> và chúng ta có một class:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=k>class</span> <span class=nc>Class</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>):</span>
    <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span>
    <span class=n>b</span> <span class=o>=</span> <span class=mi>2</span>
    <span class=n>c</span> <span class=o>=</span> <span class=mi>3</span>
</code></pre></div><p class=my-4>Thì <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">x</code> sẽ được thay đổi như sau:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=n>x</span><span class=p>[</span><span class=s1>'a'</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span>
<span class=n>x</span><span class=p>[</span><span class=s1>'b'</span><span class=p>]</span> <span class=o>=</span> <span class=mi>2</span>
<span class=n>x</span><span class=p>[</span><span class=s1>'c'</span><span class=p>]</span> <span class=o>=</span> <span class=mi>3</span>
</code></pre></div><p class=my-4>Đối tượng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">x</code> này cần phải là một dict. Lưu ý rằng, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">x</code> sẽ là được dùng làm một tham số của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Metaclass.__new__</code> và nếu như nó không phải một instance của dict thì bạn nên convert nó trước khi gọi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">super().__new__</code>.</p><p class=my-4>Một điều thú vị là phương thức không tham chiếu đến phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code>. Nó xuất hiện không hề có type slot và nó được tham chiếu thông qua tham chiếu thuộc tính của class.</p><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=chu-ky-cua-phuong-thuc><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#chu-ky-cua-phuong-thuc title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Chữ ký của phương thức</h3><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2 mb-2">Trong lập trình, nhất là lập trình hướng đối tượng, các phương thức được định danh bằng chữ ký của phương thức. Chữ ký này là duy nhất cho mỗi phương thức và thường bao gồm tên, số lượng, kiểu dữ liệu và thứ tự của các tham số.</p></blockquote><p class=my-4>Có nhiều điều quan trọng mà chúng ta chưa nhắc tới. Chữ ký của phương thức là một trong số chúng. Hãy xem xét các class mà metaclass với những công cụ được cài đặt sẵn.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Meta</span><span class=p>(</span><span class=nb>type</span><span class=p>):</span>
<span class=gp>... </span>    <span class=nd>@classmethod</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__prepare__</span><span class=p>(</span><span class=n>mcs</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Meta.__prepare__(mcs=</span><span class=si>%s</span><span class=s1>, name=</span><span class=si>%r</span><span class=s1>, bases=</span><span class=si>%s</span><span class=s1>, **</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=n>mcs</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>))</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=p>{}</span>
</code></pre></div><p class=my-4>Như giải thích ở trên, phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__prepare__</code> có thể trả kết quả không phải là một instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">dict</code>, vì vậy bạn cần cài đặt phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__new__</code> để xử lý.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>... </span>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=n>mcs</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=n>attrs</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Meta.__new__(mcs=</span><span class=si>%s</span><span class=s1>, name=</span><span class=si>%r</span><span class=s1>, bases=</span><span class=si>%s</span><span class=s1>, attrs=[</span><span class=si>%s</span><span class=s1>], **</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=n>mcs</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=s1>', '</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>attrs</span><span class=p>),</span> <span class=n>kwargs</span><span class=p>))</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=n>mcs</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=n>attrs</span><span class=p>)</span>
</code></pre></div><p class=my-4>Thông thường, <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> ít khi được cài đặt trong metaclass bởi vì không cần thiết - class đã được tạo ra trong bộ nhớ khi <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> được gọi. Nó gần tương đương với việc có một class decorator với khác biệt là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__init__</code> sẽ chạy khi tạo ra class con, trong khi class decorator không được gọi cho class con.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>... </span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=n>attrs</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Meta.__init__(cls=</span><span class=si>%s</span><span class=s1>, name=</span><span class=si>%r</span><span class=s1>, bases=</span><span class=si>%s</span><span class=s1>, attrs=[</span><span class=si>%s</span><span class=s1>], **</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=bp>cls</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=s1>', '</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>attrs</span><span class=p>),</span> <span class=n>kwargs</span><span class=p>))</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>bases</span><span class=p>,</span> <span class=n>attrs</span><span class=p>)</span>
</code></pre></div><p class=my-4>Phương thức <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__call__</code> được gọi khi tạo instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code>.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>... </span>    <span class=k>def</span> <span class=fm>__call__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Meta.__call__(cls=</span><span class=si>%s</span><span class=s1>, args=</span><span class=si>%s</span><span class=s1>, kwargs=</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=bp>cls</span><span class=p>,</span> <span class=n>args</span><span class=p>,</span> <span class=n>kwargs</span><span class=p>))</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__call__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<span class=gp>...</span>
</code></pre></div><p class=my-4>Sử dụng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Meta</code>, đánh dấu <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">extra=1</code>:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>Class</span><span class=p>(</span><span class=n>metaclass</span><span class=o>=</span><span class=n>Meta</span><span class=p>,</span> <span class=n>extra</span><span class=o>=</span><span class=mi>1</span><span class=p>):</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>myarg</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Class.__new__(cls=</span><span class=si>%s</span><span class=s1>, myarg=</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=bp>cls</span><span class=p>,</span> <span class=n>myarg</span><span class=p>))</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__new__</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>myarg</span><span class=p>):</span>
<span class=gp>... </span>        <span class=nb>print</span><span class=p>(</span><span class=s1>'Class.__init__(self=</span><span class=si>%s</span><span class=s1>, myarg=</span><span class=si>%s</span><span class=s1>)'</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=bp>self</span><span class=p>,</span> <span class=n>myarg</span><span class=p>))</span>
<span class=gp>... </span>        <span class=bp>self</span><span class=o>.</span><span class=n>myarg</span> <span class=o>=</span> <span class=n>myarg</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
<span class=gp>... </span>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=gp>... </span>        <span class=k>return</span> <span class=s2>"&lt;instance of Class; myargs=</span><span class=si>%s</span><span class=s2>&gt;"</span> <span class=o>%</span> <span class=p>(</span>
<span class=gp>... </span>            <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s1>'myarg'</span><span class=p>,</span> <span class=s1>'MISSING'</span><span class=p>),)</span>
<span class=gp>...</span>
<span class=go>Meta.__prepare__(mcs=&lt;class '__main__.Meta'&gt;, name='Class', bases=(), **{'extra': 1})</span>
<span class=go>Meta.__new__(mcs=&lt;class '__main__.Meta'&gt;, name='Class', bases=(), attrs=[__str__, __module__, __qualname__, __new__, __init__], **{'extra': 1})</span>
<span class=go>Meta.__init__(cls=&lt;class '__main__.Class'&gt;, name='Class', bases=(), attrs=[__str__, __module__, __qualname__, __new__, __init__], **{'extra': 1})</span>
</code></pre></div><p class=my-4>Lưu ý <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Meta.__call__</code> được gọi khi tạo instance của <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Class</code>:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=n>Class</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
<span class=go>Meta.__call__(cls=&lt;class '__main__.Class'&gt;, args=(1,), kwargs={})</span>
<span class=go>Class.__new__(cls=&lt;class '__main__.Class'&gt;, myarg=1)</span>
<span class=go>Class.__init__(self=&lt;instance of Class; myargs=MISSING&gt;, myarg=1)</span>
<span class=go>&lt;__main__.Class object at 0x7fd71e85a198&gt;</span>
</code></pre></div><h3 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-2xl text-gray-900 dark:text-gray-100" id=tai-sao-chung-ta-nen-dung-metaclass><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#tai-sao-chung-ta-nen-dung-metaclass title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Tại sao chúng ta nên dùng metaclass?</h3><p class=my-4>Sau tất cả những kiến thứ trên, câu hỏi lớn bây giờ là: Tại sao chúng ta lại cần dùng metaclass?</p><p class=my-4>Thực ra, rất ít khi chúng ta dùng đến chúng:</p><blockquote class="my-4 py-1 px-4 text-gray-400 bg-gray-100 border-l-4 border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300"><p class="my-4 mt-2">Metaclasses are deeper magic that 99% of users should never worry about. If you wonder whether you need them, you don't (the people who actually need them know with certainty that the need them, and don't need an explanation about why).</p><p class="my-4 mb-2">– Python Guru Tim Peters –</p></blockquote><p class=my-4>Mục đích chính của metaclass là tạo ra các API. Một ví dụ điển hình cho việc này là Django ORM.</p><p class=my-4>Bạn có thể định nghĩa model trong Django như bên dưới:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=k>class</span> <span class=nc>Person</span><span class=p>(</span><span class=n>models</span><span class=o>.</span><span class=n>Model</span><span class=p>):</span>
    <span class=n>name</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>CharField</span><span class=p>(</span><span class=n>max_length</span><span class=o>=</span><span class=mi>30</span><span class=p>)</span>
    <span class=n>age</span> <span class=o>=</span> <span class=n>models</span><span class=o>.</span><span class=n>IntegerField</span><span class=p>()</span>
</code></pre></div><p class=my-4>Nhưng nếu bạn tạo ra một đối tượng:</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=n>someone</span> <span class=o>=</span> <span class=n>Person</span><span class=p>(</span><span class=n>name</span><span class=o>=</span><span class=s1>'AnhTN'</span><span class=p>,</span> <span class=n>age</span><span class=o>=</span><span class=s1>'25'</span><span class=p>)</span>
<span class=nb>print</span><span class=p>(</span><span class=n>someone</span><span class=o>.</span><span class=n>age</span><span class=p>)</span>
</code></pre></div><p class=my-4>Lệnh <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">print</code> ở trên không in ra một đối tượng <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">IntegerField</code>. Nó in ra một số nguyên, là dữ liệu được lấy ra từ cơ sở dữ liệu.</p><p class=my-4>Chúng ta có thể làm việc này vì <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">models.Model</code> định nghĩa <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">__metaclass__</code> và nó một số xử lý bên trong và kết quả là <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">Person</code> có thể định nghĩa rất đơn giản trong khi thực tế nó thao tác rất phức tạp với cơ sở dữ liệu.</p><p class=my-4>Django làm mọi thứ trở nên đơn giản hơn bằng cách xây dựng các API và sử dụng metaclass. Mọi thao tác sẽ được thực hiện bởi API và trong suốt với người dùng.</p><h2 class="group font-semibold mt-8 mb-4 pb-2 border-b border-gray-100 dark:border-gray-700 text-3xl text-gray-900 dark:text-gray-100" id=ket-luan><a class="md:opacity-0 group-hover:opacity-100 float-left -ml-5 pr-1 leading-none" href=#ket-luan title="Permanent link"><svg class="h-4 w-4 inline-block" fill=none stroke=currentColor viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" stroke-linecap=round stroke-linejoin=round stroke-width=2></path></svg></a>Kết luận</h2><p class=my-4>Class là những đối tượng để tạo ra các instance. Đến lượt nó, class cũng là instance của metaclass.</p><div class="chl my-4 p-4 bg-gray-100 dark:bg-gray-900 overflow-auto scrollbar:!w-1.5 scrollbar:!h-1.5 scrollbar:bg-transparent scrollbar-track:!bg-gray-100 scrollbar-thumb:!rounded scrollbar-thumb:!bg-gray-300 scrollbar-track:!rounded dark:scrollbar-track:!bg-gray-500/[0.16] dark:scrollbar-thumb:!bg-gray-500/50"><pre class=text-sm><code><span class=gp>&gt;&gt;&gt; </span><span class=k>class</span> <span class=nc>FooBar</span><span class=p>():</span>
<span class=gp>... </span>    <span class=k>pass</span>
<span class=gp>...</span>
<span class=gp>&gt;&gt;&gt; </span><span class=nb>id</span><span class=p>(</span><span class=n>FooBar</span><span class=p>)</span>
<span class=go>32902216</span>
</code></pre></div><p class=my-4>Mọi thứ đều là đối tượng trong Python, và có thể nó là instance của một class hoặc một metaclass, ngoại trừ <code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code>.</p><p class=my-4><code class="bg-gray-100 p-0.5 dark:bg-gray-900 text-sm">type</code> là metaclass của chính nó. Và nó không phải là thứ bạn có thể dễ dàng thay đổi bằng code Python. Nếu muốn làm gì, có lẽ bạn phải xem lại mã nguồn của ngôn ngữ.</p><p class=my-4>Ngoài ra, metaclass rất phức tạp, và bạn không cần thiết phải sử dụng nó. Bạn có thể thay đổi hành vi của một class bằng một trong hai cách sau, đơn giản hơn nhiều:</p><ul class="list-disc ml-5"><li><a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://en.wikipedia.org/wiki/Monkey_patch rel="noopener noreferrer" target=_blank>monkey patching</a></li><li>class decorator</li></ul><p class=my-4>Đây là những gì tôi đã tìm hiểu được. Nó có rất nhiều thứ và thực sự, metaclass quá phức tạp. Có thể tôi sẽ trở lại với chủ đề này trong tương lai, vì tôi cũng cảm thấy hình như còn thiếu gì đó!!</p></div><div class="mt-8 text-sm leading-relaxed"><svg xmlns=http://www.w3.org/2000/svg class="h-4 w-4 inline" fill=none viewbox="0 0 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/></svg><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #Python </span><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #metaclass </span><span class="text-crimson hover:text-gray-500 cursor-pointer dark:hover:text-gray-300"> #fundamental </span></div></div><div class="flex justify-between items-center my-10 text-sm"><div class="flex-grow text-left"><a href=/2016/03/08/python-class-decorator.html class="p-2 text-white bg-crimson"><svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg> Bài viết sau </a></div><div class="flex-grow text-right"><a href=/2016/02/18/vai-tip-cai-thien-hieu-suat-trang-web.html class="p-2 text-white bg-crimson"> Bài viết trước <svg xmlns=http://www.w3.org/2000/svg class="inline h-4 w-4" fill=none viewbox="0 2 24 24" stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg></a></div></div><div class="mb-8 p-8 text-justify bg-white shadow-lg dark:bg-gray-800 dark:text-gray-300"><p class="mb-2 italic leading-relaxed"> Tôi xin lỗi nếu bài viết có bất kỳ typo nào. Nếu bạn nhận thấy điều gì bất thường, xin hãy cho tôi biết. </p><p class="mb-8 leading-relaxed"> Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer">tạo discussion</a> hoặc <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer">report issue</a> trên Github. </p><div class="flex justify-between mb-4 text-gray-900 dark:text-gray-100"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Discussion</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg></a></div></div></div><div class="md:col-span-2 flex-shrink-0 p-6 bg-white text-sm leading-relaxed shadow-entry dark:bg-gray-800"><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Welcome </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><img width=262 height=262 src=/meow.webp alt=manhhomienbienthuy class="w-3/4 h-auto mx-auto mb-4 rounded-full"><p class="mb-10 text-justify">Xin chào. Tôi là manhhomienbienthuy, nickname khác là naa. Đây là thế giới của tôi, chào mừng đến với thế giới của tôi…</p><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Bài viết liên quan </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="mb-10 divide-y"><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2017/07/24/mot-vai-trick-python-ban-nhat-dinh-phai-biet-tren-con-duong-go-pro.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Một vài trick Python bạn nhất định phải biết trên con đường go-pro" src=https://i.imgur.com/X9o9emks.jpg></a><a href=/2017/07/24/mot-vai-trick-python-ban-nhat-dinh-phai-biet-tren-con-duong-go-pro.html> Một vài trick Python bạn nhất định phải biết trên con đường go-pro </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2017/05/12/python-context-managers.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python context managers" src=https://i.imgur.com/nI0FtXNs.png></a><a href=/2017/05/12/python-context-managers.html> Python context managers </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2016/03/08/python-class-decorator.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python class decorator" src=https://i.imgur.com/TMu6Ygls.png></a><a href=/2016/03/08/python-class-decorator.html> Python class decorator </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2016/01/05/python-iterator-generator.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Python iterator & generator" src=https://i.imgur.com/6Q3UDiWs.png></a><a href=/2016/01/05/python-iterator-generator.html> Python iterator & generator </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow" href=/2015/12/22/tim-hieu-python-decorators.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Tìm hiểu Python decorators" src=https://i.imgur.com/Y20vNKls.png></a><a href=/2015/12/22/tim-hieu-python-decorators.html> Tìm hiểu Python decorators </a></div></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Bài viết mới </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="divide-y mb-10"><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/05/06/postgresql-vs-mysql.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="PostgreSQL vs MySQL" src=https://i.imgur.com/5d93N7Fs.png></a><a href=/2022/05/06/postgresql-vs-mysql.html> PostgreSQL vs MySQL </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/04/11/nodejs-blocking-non-blocking-io.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="NodeJS: Blocking & Non-blocking I/O" src=https://i.imgur.com/9ql6xWws.png></a><a href=/2022/04/11/nodejs-blocking-non-blocking-io.html> NodeJS: Blocking & Non-blocking I/O </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/04/01/hieu-hon-javascript-object-prototype-va-class.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Hiểu hơn JavaScript: Object, Prototype và Class" src=https://i.imgur.com/0OW5FHzs.png></a><a href=/2022/04/01/hieu-hon-javascript-object-prototype-va-class.html> Hiểu hơn JavaScript: Object, Prototype và Class </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/03/16/dung-dung-last-n-versions-voi-browserslist.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="Đừng dùng last n versions với browserslist" src=https://i.imgur.com/WyMHkO5s.jpg></a><a href=/2022/03/16/dung-dung-last-n-versions-voi-browserslist.html> Đừng dùng last n versions với browserslist </a></div><div class="flex items-center gap-2 mb-6 pt-6"><a class="flex-shrink-0 w-16 h-16 shadow-img" href=/2022/03/01/so-sanh-nho-typescript-vs-javascript.html><img width=64 height=64 loading=lazy class="w-full h-full p-1" alt="So sánh nhỏ: TypeScript vs JavaScript" src=https://i.imgur.com/UNFe3Hxs.jpg></a><a href=/2022/03/01/so-sanh-nho-typescript-vs-javascript.html> So sánh nhỏ: TypeScript vs JavaScript </a></div></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Chuyên mục </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="flex flex-wrap gap-2 mb-10 text-xs dark:border-gray-100"><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/cuoc-song.html> Cuộc sống </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/du-lich.html> Du lịch </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/lap-trinh.html> Lập trình </a><a class="py-1 px-2 text-white uppercase bg-crimson" href=/category/tong-hop.html> Tổng hợp </a></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Lưu trữ theo năm </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><div class="flex flex-wrap gap-[0.57rem] mb-10 text-xs"><a href=/2022/ class="py-1 w-10 text-white text-center bg-crimson"> 2022 </a><a href=/2021/ class="py-1 w-10 text-white text-center bg-crimson"> 2021 </a><a href=/2020/ class="py-1 w-10 text-white text-center bg-crimson"> 2020 </a><a href=/2019/ class="py-1 w-10 text-white text-center bg-crimson"> 2019 </a><a href=/2018/ class="py-1 w-10 text-white text-center bg-crimson"> 2018 </a><a href=/2017/ class="py-1 w-10 text-white text-center bg-crimson"> 2017 </a><a href=/2016/ class="py-1 w-10 text-white text-center bg-crimson"> 2016 </a><a href=/2015/ class="py-1 w-10 text-white text-center bg-crimson"> 2015 </a><a href=/2014/ class="py-1 w-10 text-white text-center bg-crimson"> 2014 </a><a href=/2013/ class="py-1 w-10 text-white text-center bg-crimson"> 2013 </a><a href=/2012/ class="py-1 w-10 text-white text-center bg-crimson"> 2012 </a><a href=/2011/ class="py-1 w-10 text-white text-center bg-crimson"> 2011 </a><a href=/2010/ class="py-1 w-10 text-white text-center bg-crimson"> 2010 </a></div><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Câu nói yêu thích </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><p class=text-justify><q>There's a big difference between knowing the name of something and knowing something.</q></p><p class="mt-2 mb-8 text-right text-indigo-500">– Richard P. Feynman –</p><h2 class="mb-2 font-semibold text-gray-900 uppercase dark:text-gray-100"> Thông tin liên hệ </h2><hr class="w-8 h-0.5 border-gray-900 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-1 dark:border-gray-100"><hr class="w-8 h-0.5 border-gray-900 ml-2 mb-4 dark:border-gray-100"><p class="mb-8 text-justify"> Cảm ơn bạn đã quan tâm blog của tôi. Nếu có bất điều gì muốn nói, bạn có thể liên hệ với tôi qua các mạng xã hội, <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer">tạo discussion</a> hoặc <a class="text-crimson hover:text-gray-500 dark:hover:text-gray-300" href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer">report issue</a> trên Github. </p><div class="flex justify-between mb-8 text-gray-900 dark:text-gray-100"><a href=https://twitter.com/_naa_4f target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Twitter</title><path d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/></svg></a><a href=https://www.linkedin.com/in/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>LinkedIn</title><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/></svg></a><a href=https://www.facebook.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Facebook</title><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a><a href=https://github.com/manhhomienbienthuy target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Github</title><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/discussions target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Discussion</title><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"/></svg></a><a href=https://github.com/manhhomienbienthuy/manhhomienbienthuy.github.io/issues target=_blank rel="noopener noreferrer"><svg xmlns=http://www.w3.org/2000/svg class="h-6 w-6" fill=currentColor viewbox="0 0 16 16"><title>Issue</title><path d="M4.355.522a.5.5 0 0 1 .623.333l.291.956A4.979 4.979 0 0 1 8 1c1.007 0 1.946.298 2.731.811l.29-.956a.5.5 0 1 1 .957.29l-.41 1.352A4.985 4.985 0 0 1 13 6h.5a.5.5 0 0 0 .5-.5V5a.5.5 0 0 1 1 0v.5A1.5 1.5 0 0 1 13.5 7H13v1h1.5a.5.5 0 0 1 0 1H13v1h.5a1.5 1.5 0 0 1 1.5 1.5v.5a.5.5 0 1 1-1 0v-.5a.5.5 0 0 0-.5-.5H13a5 5 0 0 1-10 0h-.5a.5.5 0 0 0-.5.5v.5a.5.5 0 1 1-1 0v-.5A1.5 1.5 0 0 1 2.5 10H3V9H1.5a.5.5 0 0 1 0-1H3V7h-.5A1.5 1.5 0 0 1 1 5.5V5a.5.5 0 0 1 1 0v.5a.5.5 0 0 0 .5.5H3c0-1.364.547-2.601 1.432-3.503l-.41-1.352a.5.5 0 0 1 .333-.623zM4 7v4a4 4 0 0 0 3.5 3.97V7H4zm4.5 0v7.97A4 4 0 0 0 12 11V7H8.5zM12 6a3.989 3.989 0 0 0-1.334-2.982A3.983 3.983 0 0 0 8 2a3.983 3.983 0 0 0-2.667 1.018A3.989 3.989 0 0 0 4 6h8z"/></svg></a></div></div></div><a href=# class="jsBackToTop fixed z-50 bottom-4 right-4 block hidden w-10 h-10 text-white bg-crimson rounded-full"><svg xmlns=http://www.w3.org/2000/svg class="h-10 w-10" fill=none viewbox="0 0 24 24" stroke=currentColor><title>Back to Top</title><path stroke-linecap=round stroke-linejoin=round stroke-width=4 d="M7 11l5-5m0 0l5 5m-5-5v12"/></svg></a></main><footer class="mt-8 text-white"><div class=bg-gray-800><div class="grid grid-cols-1 md:grid-cols-3 md:gap-8 max-w-screen-xl mx-auto px-4 leading-loose text-justify"><div class=py-8><a href=/ title="Blog | manhhomienbienthuy"><svg width=1000 height=165 version=1.0 viewbox="0 0 1000 165" fill=currentColor class="w-full h-auto text-white" xmlns=http://www.w3.org/2000/svg><path d="M651.5 14.7c-10.4 1-11.6 1.4-11 3.3.9 2.9-1.2 7-17.6 34.2-8.4 13.9-17.6 30.2-20.4 36.3-3.5 7.4-6.7 12.4-9.6 15.4-6.1 6.1-13.9 9.2-13.9 5.6 0-2.6 4.7-11 12.7-22.8C600.3 74 602 70.5 602 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C500.2 71 505.5 60.6 504.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.2-3.6 4.8-2 6.7-19.5 35.4-25 41.1-5.1 5.1-8.7 6.6-9.8 3.8-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8c13.2-20.9 20.3-29.9 25.2-31.7 7-2.7 5.7 3-5 21-7.7 12.9-11.6 21.6-11.6 25.8 0 2 5.5 7.2 7.7 7.2 3.9 0 9.5-2.2 13.8-5.5 2.5-1.9 4.7-3.5 5-3.5s.5 1.3.5 2.8c0 1.7 1 3.8 2.5 5.2 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-5 7.7-10 15.9-11.2 18.2-2.7 5.4-2.9 11.8-.4 14.6 4.4 4.8 16.5 1.1 25.6-8l4.8-4.8.6 3.8c1.3 8.3 8.3 12.4 17.3 10.2 18.5-4.6 39.3-28 39.3-44.3 0-14-8.6-18.8-20-11.1-5.5 3.7-5.5 3.7-3.6.8 5.6-8.5 23.6-41 24.1-43.6.8-3.7 0-4.6-4-4.2zM542.6 62.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zm101 3c1.9 7.8-15.7 39.6-25.6 46.3-2.2 1.4-4.6 2.2-6.5 2-2.6-.3-3-.7-3.3-3.6-.8-8.1 8.8-27.5 19.7-39.5 7-7.8 14.4-10.2 15.7-5.2zM821 16c-1.1 1.1-2 2.7-2 3.5 0 2.1-5.3 12.5-9.7 19.2l-3.6 5.3h-5.8c-5.6 0-5.9.1-5.9 2.4 0 2.2.5 2.5 4.4 2.8l4.4.3-11 18c-6 9.9-13 22-15.4 27-4.7 9.9-7.3 13-12.1 15.1-4.2 1.8-6.3 1.8-6.3-.1 0-2.6 4.7-11 12.7-22.8C779.3 74 781 70.5 781 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 3.1-8.1 17.8-14.9 27.2-5.8 8-17.3 18.7-22.5 21.1-11.4 5.2-15.8-1.8-9.3-15 2-4.1 2.7-4.6 7.7-5.8 11.9-2.9 24.9-11.3 28.5-18.4 2.1-4 1.9-9.2-.5-11.4-1.5-1.4-3-1.7-6.7-1.2-17.2 2-35.5 17.7-42.7 36.6-2.1 5.4-3.9 8.1-8.4 12.4-6.4 6.1-9.5 7.5-11.8 5.6-2.8-2.3-.9-7 9.2-23.5C679.2 71 684.5 60.6 683.5 59c-.8-1.2-8.5-1.3-11.7-.1-1.6.6-2.8 2.3-3.6 4.9-.7 2.2-4.9 10-9.3 17.3-10.4 17-12.9 22.7-12.9 28.8 0 3.8.5 5.2 2.5 7.1 2.1 2 3.1 2.2 7.4 1.7 6.3-.7 10.2-2.8 16.2-8.4l4.7-4.4 1.1 3.4c.7 1.9 2.3 4.5 3.7 5.8 2.1 2 3.6 2.4 8.7 2.4 7.1 0 11.8-2.3 20-9.5 2.6-2.3 4.7-3.9 4.7-3.6s-1.3 2.7-3 5.3c-4.3 6.8-4.1 7.3 3.3 7.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 10.4 11 11.4 23.4 2l3.5-2.7.8 3c2.1 8.2 12.3 8.2 22.8 0 4.4-3.5 5.6-3.7 3.5-.7-3.1 4.4-2.2 5.8 3.7 5.8 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-9.8 15.5-12.8 21.7-12.8 26.5 0 4.4 3.3 7.9 7.6 7.9 4.5 0 12.6-4.5 18.6-10.3l5.4-5.2-.4 5.2c-.5 6.3 1.3 9.8 5.7 10.8s9.5-1.7 17.1-9.1l6.9-6.6-.2 5.5c-.2 4.2.3 6 1.7 7.6 2.8 3.1 8.3 2.8 13.2-.7l3.9-2.8 2 3c1.1 1.6 3.1 3.3 4.5 3.6 3.8 1 11.1-1.5 15.8-5.5 2.3-2 4.2-3.4 4.2-3.1 0 1.2-10.4 19.3-13.5 23.6-4.7 6.4-14.3 15.4-19.3 17.9-4.7 2.4-10.9 2.7-13.7.8-1.6-1.2-1.6-1.8-.7-4.7 1.6-4.4 1.5-5.6-.4-7.4-3.8-3.8-10.4.2-10.4 6.3 0 11 18.9 13.3 36.9 4.5 11.2-5.5 20.6-15.4 29.7-31.4 3.9-6.9 10.6-18.4 14.9-25.5 16.8-28.2 19.1-32.6 18-34.5-.4-.6-3.5-1-7.1-1-5.3 0-6.6.3-7 1.7-.8 2.9-12.5 25.4-16.1 31.2-6.9 10.8-18.9 21.2-22.8 19.7-2.8-1 1.4-11 11-26.7 7.3-11.8 12.7-22.8 12.1-24.5-.6-1.5-4.4-1.8-9.5-.8-2.7.6-3.6 1.5-5.5 5.8-1.3 2.8-5.8 10.6-10 17.4-7.7 12.2-12.6 21.5-12.6 23.9 0 1.7-4.6 4.6-6 3.8-3.2-2 .2-11 10.4-27.8 7.7-12.8 11.5-20.1 11.6-22.5 0-.8-1.4-1.2-4.2-1.1-9.3.3-9.7.6-13.8 10.2-6.6 15.4-24.1 39.3-30.4 41.7-2.9 1-4.6.2-4.6-2.4 0-1.2 3.9-8.7 8.6-16.7C900 63.4 901.8 58 894.5 58c-6.7 0-9.5 1.1-10 3.9-2.4 12.1-24.9 42.1-34.6 46.1-7.4 3.1-5.5-3.2 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-1-1.2-2.4-1.5-6.1-1-6.7.9-7.5 1.4-8.3 4.4-.3 1.5-2.3 5.6-4.5 9.2-2.1 3.6-7.5 13-12 21-28.3 50.1-35.9 60.5-43.8 59.8-5-.4-5.2-2.6-1.2-12.1 3.3-8.1 16.2-30.6 24.2-42.5l4.9-7.2h5.4c5.2 0 5.5-.1 5.5-2.5 0-2.3-.4-2.5-4-2.5-2.2 0-4-.2-4-.6 0-.3 1.8-3.2 4-6.4 5-7.4 11-18.9 11-21.3 0-2.7-12.2-2.5-15 .3zm-99.4 46.5c.3.8-.7 3.7-2.2 6.5-3.8 7-16.5 17-21.5 17-1.7 0 9-14.6 14.6-19.9 5.5-5.2 8.1-6.2 9.1-3.6zM271.5 16.5c-.5.2-2.2.6-3.7.9-1.6.4-2.8 1.2-2.8 1.9 0 1.7-2.4 6.2-12.9 24.7-18.8 33.1-33.6 57.7-36.5 60.9-4.7 5.1-12.6 8-12.6 4.6 0-2.6 4.7-11 12.7-22.8C224.3 74 226 70.5 226 65.5c0-5.2-2.8-7.5-9-7.5-5.7 0-9.5 1.6-15.7 6.7-2.4 1.9-4.3 3.2-4.3 3 0-.3.7-2.1 1.5-4.1.9-2 1.3-4.1 1-4.6-.4-.6-3.7-1-7.6-1-6.9 0-6.9 0-6.9 2.8 0 5.5-20.8 38.1-29.4 46-4.8 4.4-7 5.2-7.9 2.8-1-2.5 1-7.5 7.2-18 8.4-14.3 18.1-31.8 18.1-32.8 0-.4-2.9-.8-6.5-.8s-6.5.4-6.5.8c0 .5-.6 1.6-1.3 2.6-1.3 1.8-1.5 1.7-4.1-.9-2.4-2.4-3.4-2.7-7-2.3-13.6 1.6-31.1 16.8-39.7 34.5-5.8 11.8-16.5 21-18.5 15.9-.6-1.7 3-9.1 9.6-19.6 12.6-20.1 14.1-27.7 6.1-31.9-4.6-2.5-13.9.9-20 7.3-1.9 2-3.9 3.6-4.3 3.6s-.8-1.6-.8-3.5c0-4.6-2.9-7.5-7.5-7.5-4.2 0-8.4 2-14.2 6.7l-4.2 3.5.9-3.2c1.4-5 .5-6-6-6-6.3 0-8.2 1.3-9.4 6.3-.6 2.7-17.1 33-24.7 45.4-2.2 3.5-3.9 6.6-3.9 6.8 0 .3 3.1.5 6.8.5h6.8l8.2-13.8c11.1-18.8 19.6-30.5 25.6-35.3 5.1-4.1 8.8-4.8 9.4-1.8.2.9-5.8 12.5-13.3 25.8-7.4 13.2-13.5 24.3-13.5 24.6s2.8.5 6.2.3l6.2-.3 13-20.8C79.6 74.8 86.7 65.8 91.6 64c7-2.7 5.7 3-5 21C78.9 97.9 75 106.6 75 110.8c0 .7 1.4 2.7 3 4.4 2.8 2.7 3.5 3 7.1 2.4 5.4-.9 9.2-2.9 14.4-7.7l4.3-3.9.7 3.6c.3 2.1 2 5 3.6 6.7 2.5 2.5 3.6 2.9 6.4 2.4 3.8-.6 9.8-4.5 16.4-10.6 2.4-2.3 4.5-4.1 4.7-4.1s.4 2.2.4 5c0 6.2 2.7 9.6 6.8 8.5 3.5-.9 8.2-3.1 11.1-5.2 2.4-1.7 2.4-1.7 1.3.4-2.1 3.8-1.5 4.3 5.1 4.3h6.3l11.2-17.3c12.5-19.4 19.9-28.6 26.3-32.8 5.1-3.5 8.5-3.5 8.2-.1-.2 1.3-4.4 8.6-9.3 16.3-11.4 17.8-13.3 21.4-13.4 26.5-.2 8.3 7.1 10.9 16.7 6 4.4-2.2 4.7-2.2 4.7-.5 0 1.6.8 1.9 5.3 1.9 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.4 21.3-15.4 27.6-10.3 32.4 4.2 3.9 12 1.6 22.4-6.7l3.5-2.8-2.7 4c-4.2 6.2-3.7 7.5 2.6 7.5 3.9 0 5.8-.5 6.9-1.8.9-.9 5.8-8.7 10.8-17.2 13.2-22 18-28.1 26-32.9 5.2-3.1 7-2.8 7 1.2 0 2.5-2.2 6.8-8.2 16.3-13.3 21.1-15.4 27.6-10.5 32.2 4.5 4.3 12 2 22.5-6.7 5.6-4.7 6.2-5 6.2-2.9 0 3.7 3.4 8.3 7.6 10.3 14.4 7 36.7-6.2 47.5-28 4-8 4.4-9.5 4.4-16.1 0-6.3-.3-7.6-2.4-9.8-8.4-8.9-26.6-4-42.2 11.5-6.3 6.2-8.5 9.2-12.2 17-3.4 7.1-5.7 10.3-9.1 13.1-5.7 4.8-9.3 6.5-10.7 5.1-1.6-1.6 1.6-8.1 10.1-20.8 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13.2-21.9 16.4-28.5 14.7-30.6-2-2.4-13.9-.7-13.9 2S293.2 74.5 284 88c-5 7.3-16 18.3-20.1 20-7.4 3.1-5.6-3.1 6.1-20.5 8.5-12.6 10-15.9 10-21.8 0-9.6-10.3-11.3-20.9-3.6-2.4 1.7-4.4 2.9-4.6 2.7s4.2-7.7 9.7-16.8c13-21.5 16.4-28.5 14.8-30.5-1.1-1.4-4.9-1.9-7.5-1zM151.8 62.2c3.2 3.2-.1 12.6-10.1 28.1-8.9 13.8-16.1 20.7-21.6 20.7-2.7 0-4.4-3.4-3.5-7.3 2.3-11.1 21.5-37.5 29.9-41.3 3.7-1.7 3.8-1.7 5.3-.2zm232 0c3.5 3.5-1 17.8-9.8 31.1-10.1 15.4-20.3 22.2-25.5 17-6.8-6.7 12.9-39 29-47.6 3.7-2 4.7-2.1 6.3-.5z"/><path d="M505.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8zM684.6 33c-6.8 8.1.3 14.8 7.8 7.3 2.1-2.1 2.6-3.5 2.4-6.2-.3-3.3-.6-3.6-3.9-3.9-3-.3-4.1.2-6.3 2.8z"/></svg></a><div class="flex items-center mb-4 gap-4"><img width=56 height=56 class="h-16 w-16 rounded-full" src=/meow.webp alt=manhhomienbienthuy><p> manhhomienbienthuy<br> salaried coder </p></div></div><div class=py-8><p class=mb-4> Trang web này được viết bằng tất cả ♥ và tinh thần của tôi, dành tặng cho tình yêu của tôi, yunachan. </p><p class=mb-4> Trang web được lưu trữ trên <a class=font-bold href=https://manhhomienbienthuy.github.io>GitHub Pages</a>, hình ảnh được lưu trữ trên các trang <a class=font-bold href=https://manhhomienbienthuy.imgur.com/ target=_blank rel="noopener noreferrer">imgur</a>, <a class=font-bold href=https://instagram.com/manhhomienbienthuy/ target=_blank rel="noopener noreferrer">Instagram</a> và <a class=font-bold href=https://photos.google.com/ target=_blank rel="noopener noreferrer">Google Photos</a>. </p><p class=mb-4> Nội dung trang web này được cấp phép theo giấy phép <a class=font-bold href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank rel="noopener noreferrer">CC BY-NC-ND 4.0</a>. </p><p> Cập nhật lần cuối lúc <a class=font-bold target=_blank rel="noopener noreferrer" href="http://www.timeanddate.com/worldclock/fixedtime.html?iso=20220523T094453&p1=248">2022-05-23 09:44:53 (JST)</a> (rev: <code>30eea8c</code>). </p></div><div class=py-8><p class=mb-4> HTML được build bởi <a class=font-bold href=http://blog.getpelican.com/ target=_blank rel="noopener noreferrer">Pelican</a>, tự động hóa bằng <a class=font-bold target=_blank rel="noopener noreferrer" href=https://github.com/features/actions>GitHub Actions</a>, có sử dụng <a class=font-bold target=_blank href=https://python-markdown.github.io/ rel="noopener noreferrer">Python-Markdown</a>, <a class=font-bold target=_blank href=https://pygments.org/ rel="noopener noreferrer">Pygments</a> và nhiều công cụ khác. </p><p class=mb-4> Giao diện được làm dựa trên <a class=font-bold href=https://vanice-veethemes.blogspot.com/ target=_blank rel="noopener noreferrer">Vanice theme</a> với sự hỗ trợ của <a class=font-bold href=https://tailwindcss.com/ target=_blank rel="noopener noreferrer">Tailwind CSS</a> và <a class=font-bold target=_blank href=https://lisperator.net/uglifyjs/ rel="noopener noreferrer">UglifyJS</a>. Trang báo lỗi (404) được làm dựa trên <a href=https://github.com/mdjamal/tailwindcss-rails-custom-error-page-templates class=font-bold target=_blank rel="noopener noreferrer">chia sẻ này</a>. </p><p> Icon sử dụng kết hợp giữa <a class=font-bold href=https://heroicons.com/ target=_blank rel="noopener noreferrer">Heroicons</a> và <a class=font-bold href=https://icons.getbootstrap.com/ target=_blank rel="noopener noreferrer">Bootstrap Icons</a>. </p></div></div></div><div class=bg-gray-900><div class="flex flex-wrap justify-between max-w-screen-xl mx-auto px-4"><div class="pt-4 md:py-4"> Copyright © 2010–2022 <a href=/pages/gioi-thieu.html class=font-bold> manhhomienbienthuy </a></div><div class="flex-grow py-4 text-right divide-x divide-solid"><span class=px-2><a href=/ >Trang chủ</a></span><span class=px-2><a href=/pages/gioi-thieu.html>Giới thiệu</a></span><span class=pl-2><a href=#>Lên đầu trang ↑</a></span></div></div></div></footer><script defer src=/theme/js/app.min.js></script></body></html>